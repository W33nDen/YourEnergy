{"version":3,"file":"main-R9avdFZn.js","sources":["../../src/js/header.js","../../src/js/api.js","../../src/js/quote.js","../../src/js/pagination.js","../../src/js/exercises.js","../../src/js/filters.js","../../src/js/toast.js","../../src/js/footer.js","../../src/js/storage.js","../../src/js/modal.js","../../src/js/favorites.js","../../src/main.js"],"sourcesContent":["// Set active navigation link based on current page\nconst setActiveNavLink = () => {\n  const currentPath = window.location.pathname;\n  const navLinks = document.querySelectorAll('.nav-link');\n  const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');\n\n  // Remove all active classes\n  [...navLinks, ...mobileNavLinks].forEach(link => {\n    link.classList.remove('active');\n  });\n\n  // Set active based on current page\n  if (currentPath.includes('favorites')) {\n    navLinks[1]?.classList.add('active'); // Favorites\n    mobileNavLinks[1]?.classList.add('active');\n  } else {\n    navLinks[0]?.classList.add('active'); // Home\n    mobileNavLinks[0]?.classList.add('active');\n  }\n};\n\n// Mobile menu toggle\nconst menuOpenBtn = document.querySelector('[data-menu-open]');\nconst menuCloseBtn = document.querySelector('[data-menu-close]');\nconst mobileMenu = document.querySelector('[data-menu]');\n\nif (menuOpenBtn && menuCloseBtn && mobileMenu) {\n  menuOpenBtn.addEventListener('click', () => {\n    mobileMenu.classList.add('is-open');\n  });\n\n  menuCloseBtn.addEventListener('click', () => {\n    mobileMenu.classList.remove('is-open');\n  });\n}\n\n// Set active link on page load\nsetActiveNavLink();\n","/**\n * Клас для взаємодії з Your Energy API\n * Документація: https://your-energy.b.goit.study/api-docs/\n */\nexport class YourEnergyAPI {\n  #BASE_URL = 'https://your-energy.b.goit.study/api';\n\n  /**\n   * Універсальний метод для виконання запитів\n   * @param {string} endpoint - частина URL після base\n   * @param {object} options - налаштування запиту (method, headers, body)\n   */\n  async #fetchData(endpoint, options = {}) {\n    const url = `${this.#BASE_URL}${endpoint}`;\n\n    try {\n      const response = await fetch(url, options);\n\n      // Якщо статус не ОК (не 200-299), кидаємо помилку з кодом статусу\n      if (!response.ok) {\n        const error = new Error(\n          `API Error: ${response.status} ${response.statusText}`\n        );\n        error.status = response.status; // Зберігаємо код статусу для обробки\n        throw error;\n      }\n\n      return await response.json();\n    } catch (error) {\n      // Прокидаємо помилку далі, щоб обробити її в UI\n      throw error;\n    }\n  }\n\n  /**\n   * Отримання цитати дня\n   * GET /quote\n   */\n  async getQuote() {\n    return this.#fetchData('/quote');\n  }\n\n  /**\n   * Отримання списку фільтрів (категорій)\n   * GET /filters\n   * @param {string} filter - 'Muscles', 'Body parts', 'Equipment'\n   * @param {number} page\n   * @param {number} limit\n   */\n  async getFilters(filter = 'Muscles', page = 1, limit = 12) {\n    // Формуємо параметри запиту\n    const params = new URLSearchParams({\n      filter,\n      page,\n      limit,\n    });\n    return this.#fetchData(`/filters?${params}`);\n  }\n\n  /**\n   * Отримання вправ\n   * GET /exercises\n   * @param {object} params - { bodypart, muscles, equipment, keyword, page, limit }\n   */\n  async getExercises({\n    bodypart = '',\n    muscles = '',\n    equipment = '',\n    keyword = '',\n    page = 1,\n    limit = 10,\n  } = {}) {\n    const searchParams = new URLSearchParams({\n      page,\n      limit,\n    });\n\n    // Додаємо тільки ті параметри, які існують (не пусті)\n    if (bodypart) searchParams.append('bodypart', bodypart);\n    if (muscles) searchParams.append('muscles', muscles);\n    if (equipment) searchParams.append('equipment', equipment);\n    if (keyword) searchParams.append('keyword', keyword);\n\n    return this.#fetchData(`/exercises?${searchParams}`);\n  }\n\n  /**\n   * Отримання деталей однієї вправи\n   * GET /exercises/{id}\n   * @param {string} id\n   */\n  async getExerciseById(id) {\n    return this.#fetchData(`/exercises/${id}`);\n  }\n\n  /**\n   * Додавання рейтингу вправі\n   * PATCH /exercises/{id}/rating\n   * @param {string} id\n   * @param {object} data - { rate: number, email: string, review: string }\n   */\n  async patchRating(id, data) {\n    return this.#fetchData(`/exercises/${id}/rating`, {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(data),\n    });\n  }\n\n  /**\n   * Оформлення підписки\n   * POST /subscription\n   * @param {string} email\n   */\n  async createSubscription(email) {\n    return this.#fetchData('/subscription', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ email }),\n    });\n  }\n}\n","/**\n * Модуль для завантаження та відображення Quote of the Day\n * З кешуванням в localStorage для зменшення запитів до API\n */\nimport { YourEnergyAPI } from './api.js';\n\nconst api = new YourEnergyAPI();\nconst QUOTE_STORAGE_KEY = 'yourEnergy_quote';\n\n/**\n * Отримати сьогоднішню дату у форматі YYYY-MM-DD\n */\nfunction getTodayDate() {\n  return new Date().toISOString().split('T')[0];\n}\n\n/**\n * Отримати кешовану цитату з localStorage\n */\nfunction getCachedQuote() {\n  try {\n    const cached = localStorage.getItem(QUOTE_STORAGE_KEY);\n    if (!cached) return null;\n\n    const { date, quote, author } = JSON.parse(cached);\n\n    // Перевіряємо чи цитата за сьогодні\n    if (date === getTodayDate()) {\n      return { quote, author };\n    }\n    return null;\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Зберегти цитату в localStorage\n */\nfunction cacheQuote(quote, author) {\n  try {\n    const data = {\n      date: getTodayDate(),\n      quote,\n      author,\n    };\n    localStorage.setItem(QUOTE_STORAGE_KEY, JSON.stringify(data));\n  } catch {\n    // Ігноруємо помилки localStorage\n  }\n}\n\n/**\n * Ініціалізація та завантаження цитати дня\n */\nexport async function initQuote() {\n  const quoteWrapper = document.getElementById('quote-wrapper');\n\n  if (!quoteWrapper) {\n    return;\n  }\n\n  try {\n    // Спробувати отримати кешовану цитату\n    const cached = getCachedQuote();\n\n    let quoteData;\n    if (cached) {\n      quoteData = cached;\n    } else {\n      // Завантажити з API та закешувати\n      quoteData = await api.getQuote();\n      cacheQuote(quoteData.quote, quoteData.author);\n    }\n\n    // Заповнити елементи даними\n    const quoteText = document.getElementById('quote-text');\n    const quoteAuthor = document.getElementById('quote-author');\n\n    if (quoteText && quoteAuthor) {\n      quoteText.textContent = quoteData.quote;\n      quoteAuthor.textContent = quoteData.author;\n      quoteWrapper.classList.remove('hidden');\n    }\n  } catch (error) {\n    // Fallback: показати дефолтну цитату\n    const quoteText = document.getElementById('quote-text');\n    const quoteAuthor = document.getElementById('quote-author');\n\n    if (quoteText && quoteAuthor) {\n      quoteText.textContent =\n        \"The only bad workout is the one that didn't happen.\";\n      quoteAuthor.textContent = 'Unknown';\n      quoteWrapper.classList.remove('hidden');\n    }\n  }\n}\n","/**\n * Render pagination buttons\n * @param {HTMLElement} container - Container to render buttons in\n * @param {number} totalPages - Total number of pages\n * @param {number} currentPage - Current active page\n *\n * Note: Click handling is done via event delegation in the parent module\n * (filters.js or exercises.js) to prevent listener accumulation.\n */\nexport function renderPagination(container, totalPages, currentPage = 1) {\n  // Hide pagination if only 1 page or less\n  if (totalPages <= 1) {\n    container.innerHTML = '';\n    return;\n  }\n\n  let markup = '';\n\n  for (let i = 1; i <= totalPages; i++) {\n    if (\n      i === 1 ||\n      i === totalPages ||\n      (i >= currentPage - 2 && i <= currentPage + 2)\n    ) {\n      const isActive = i === currentPage ? 'active' : '';\n      markup += `\n        <button class=\"pagination-btn ${isActive}\" type=\"button\" data-page=\"${i}\">\n          ${i}\n        </button>\n      `;\n    } else if (\n      (i === currentPage - 3 && currentPage > 4) ||\n      (i === currentPage + 3 && currentPage < totalPages - 3)\n    ) {\n      markup += `<span class=\"pagination-dots\">...</span>`;\n    }\n  }\n\n  container.innerHTML = markup;\n}\n","/**\n * Модуль для роботи з вправами\n * Завантаження та рендер вправ по категоріях\n */\nimport { YourEnergyAPI } from './api.js';\nimport { renderPagination } from './pagination.js';\n\nconst api = new YourEnergyAPI();\n\n// DOM елементи (можуть бути null, якщо сторінка не головна)\nconst exercisesContainer = document.getElementById('exercises-container');\nconst pagination = document.getElementById('pagination');\nconst searchForm = document.getElementById('search-form');\nconst exercisesTitle = document.querySelector('.exercises-title');\n\n// Initialize pagination click handler (delegation)\nif (pagination) {\n  pagination.addEventListener('click', handleExercisePaginationClick);\n}\n\n// Get adaptive limit based on screen width\nfunction getExercisesLimit() {\n  return window.innerWidth >= 768 ? 10 : 8;\n}\n\n// Стан модуля для завантаження вправ по категорії\nlet exercisesState = {\n  filter: '',\n  name: '',\n  keyword: '',\n  page: 1,\n  limit: getExercisesLimit(),\n};\n\n// Мапа фільтрів для API параметрів\nconst FILTER_MAP = {\n  Muscles: 'muscles',\n  'Body parts': 'bodypart',\n  Equipment: 'equipment',\n};\n\n/**\n * Завантаження вправ за категорією (викликається з filters.js)\n * @param {string} filter - Тип фільтра (Muscles, Body parts, Equipment)\n * @param {string} name - Назва категорії (Abs, Back, Barbell тощо)\n */\nexport async function loadExercises(filter, name) {\n  // Update category display (Exercises / Category)\n  const currentCategory = document.getElementById('current-category');\n  const categorySeparator = document.querySelector(\n    '.exercises-category-separator'\n  );\n\n  if (currentCategory) {\n    currentCategory.textContent = name;\n  }\n  if (categorySeparator) {\n    categorySeparator.classList.add('visible');\n  }\n\n  // Show search form\n  if (searchForm) {\n    searchForm.classList.remove('hidden');\n    searchForm.classList.add('visible');\n    searchForm.reset();\n\n    // Add search handler (avoid duplication)\n    searchForm.removeEventListener('submit', handleSearch);\n    searchForm.addEventListener('submit', handleSearch);\n  }\n\n  // Оновлюємо стан\n  exercisesState.filter = filter;\n  exercisesState.name = name;\n  exercisesState.keyword = '';\n  exercisesState.page = 1;\n\n  // Завантажуємо вправи\n  await fetchAndRenderExercises();\n}\n\n/**\n * Внутрішня функція для завантаження та рендеру вправ\n */\nasync function fetchAndRenderExercises() {\n  if (!exercisesContainer) {\n    return;\n  }\n\n  exercisesContainer.innerHTML =\n    '<p class=\"loader-text\">Loading exercises...</p>';\n  if (pagination) pagination.innerHTML = '';\n\n  try {\n    const paramName = FILTER_MAP[exercisesState.filter];\n    const params = {\n      [paramName]: exercisesState.name.toLowerCase(),\n      page: exercisesState.page,\n      limit: exercisesState.limit,\n    };\n\n    if (exercisesState.keyword) {\n      params.keyword = exercisesState.keyword;\n    }\n\n    const data = await api.getExercises(params);\n\n    if (!data.results || data.results.length === 0) {\n      exercisesContainer.innerHTML =\n        '<p class=\"loader-text\">No exercises found for this category.</p>';\n      return;\n    }\n\n    renderExercisesMarkup(data.results);\n\n    if (pagination) {\n      renderPagination(pagination, data.totalPages, Number(data.page));\n    }\n  } catch (error) {\n    exercisesContainer.innerHTML =\n      '<p class=\"loader-text\" style=\"color: red\">Failed to load exercises. Please try again.</p>';\n  }\n}\n\n/**\n * Рендер карток вправ\n */\nfunction renderExercisesMarkup(exercises) {\n  const cardsMarkup = exercises\n    .map(\n      ex => `\n    <li class=\"exercise-card\" data-id=\"${ex._id}\">\n      <!-- Header: Badge + Rating | Start button -->\n      <div class=\"exercise-header\">\n        <div class=\"exercise-header-left\">\n          <span class=\"workout-badge\">WORKOUT</span>\n          <div class=\"rating-wrap\">\n            <span class=\"rating-value\">${ex.rating.toFixed(1)}</span>\n            <svg class=\"rating-icon\" width=\"14\" height=\"14\">\n              <use href=\"/YourEnergy/sprite.svg#icon-star\"></use>\n            </svg>\n          </div>\n        </div>\n        <button class=\"start-btn\" type=\"button\" data-id=\"${ex._id}\">\n          Start\n          <svg width=\"16\" height=\"16\">\n            <use href=\"/YourEnergy/sprite.svg#icon-arrow\"></use>\n          </svg>\n        </button>\n      </div>\n      \n      <!-- Title with icon -->\n      <div class=\"exercise-title-box\">\n        <div class=\"icon-run-wrapper\">\n          <svg class=\"icon-run\" width=\"14\" height=\"14\">\n            <use href=\"/YourEnergy/sprite.svg#icon-run\"></use>\n          </svg>\n        </div>\n        <h3 class=\"exercise-name\">${ex.name}</h3>\n      </div>\n      \n      <!-- Details row -->\n      <ul class=\"exercise-details\">\n        <li class=\"detail-item\"><span class=\"detail-label\">Burned calories:</span> <span class=\"detail-value\">${ex.burnedCalories} / ${ex.time} min</span></li>\n        <li class=\"detail-item\"><span class=\"detail-label\">Body part:</span> <span class=\"detail-value\">${ex.bodyPart}</span></li>\n        <li class=\"detail-item\"><span class=\"detail-label\">Target:</span> <span class=\"detail-value\">${ex.target}</span></li>\n      </ul>\n    </li>\n  `\n    )\n    .join('');\n\n  exercisesContainer.innerHTML = `<ul class=\"exercises-list\">${cardsMarkup}</ul>`;\n}\n\n/**\n * Обробка пагінації вправ\n */\nfunction handleExercisePaginationClick(event) {\n  const btn = event.target.closest('.pagination-btn');\n  if (!btn) return;\n\n  const newPage = Number(btn.dataset.page);\n  if (newPage === exercisesState.page) return;\n\n  exercisesState.page = newPage;\n  fetchAndRenderExercises();\n\n  // Скрол до заголовка\n  if (exercisesTitle) {\n    exercisesTitle.scrollIntoView({ behavior: 'smooth' });\n  }\n}\n\n/**\n * Обробка пошуку\n */\nasync function handleSearch(event) {\n  event.preventDefault();\n\n  const form = event.currentTarget;\n  const keyword = form.elements.keyword.value.trim();\n\n  exercisesState.keyword = keyword;\n  exercisesState.page = 1;\n\n  await fetchAndRenderExercises();\n}\n","import { YourEnergyAPI } from './api.js';\nimport { loadExercises } from './exercises.js';\nimport { renderPagination } from './pagination.js';\n\nconst api = new YourEnergyAPI();\n\n// Посилання на DOM елементи\nconst elements = {\n  filtersList: document.getElementById('filters-list'),\n  exercisesContainer: document.getElementById('exercises-container'),\n  pagination: document.getElementById('pagination'),\n  currentCategory: document.getElementById('current-category'),\n  categorySeparator: document.querySelector('.exercises-category-separator'),\n  searchForm: document.getElementById('search-form'),\n};\n\n// Get adaptive limit based on screen width\nfunction getFiltersLimit() {\n  return window.innerWidth >= 768 ? 12 : 9;\n}\n\n// Зберігаємо поточний стан\nlet currentState = {\n  filter: 'Muscles',\n  page: 1,\n  limit: getFiltersLimit(),\n};\n\n/**\n * Головна функція ініціалізації фільтрів\n */\nexport async function initFilters() {\n  if (!elements.filtersList) return;\n\n  // 1. Додаємо слухача подій на кнопки фільтрів (делегування)\n  elements.filtersList.addEventListener('click', handleFilterClick);\n\n  // 2. Додаємо слухача на контейнер вправ (делегування)\n  elements.exercisesContainer.addEventListener('click', handleCategoryClick);\n\n  // 3. Додаємо слухача на пагінацію\n  if (elements.pagination) {\n    elements.pagination.addEventListener('click', handlePaginationClick);\n  }\n\n  // 4. Load categories by default on page load\n  await loadCategories();\n}\n\n/**\n * Load default exercises to show on page load\n */\nasync function loadDefaultExercises() {\n  if (!elements.exercisesContainer) {\n    return;\n  }\n\n  // Show loading\n  elements.exercisesContainer.innerHTML =\n    '<p class=\"loader-text\">Loading...</p>';\n\n  try {\n    const data = await api.getExercises({ limit: 10 });\n\n    // Clear loading\n    elements.exercisesContainer.innerHTML = '';\n\n    // Check if results exist\n    if (!data.results || data.results.length === 0) {\n      elements.exercisesContainer.innerHTML =\n        '<p class=\"loader-text\">No exercises found</p>';\n      return;\n    }\n\n    // Create cards\n    data.results.forEach(exercise => {\n      const card = createExerciseCard(exercise);\n      elements.exercisesContainer.insertAdjacentHTML('beforeend', card);\n    });\n  } catch (error) {\n    elements.exercisesContainer.innerHTML =\n      '<p class=\"loader-text\">Failed to load exercises</p>';\n  }\n}\n\nfunction createExerciseCard(exercise) {\n  return `\n    <div class=\"exercise-card\" data-id=\"${exercise._id}\">\n      <div class=\"exercise-content\">\n        <div class=\"exercise-left\">\n          <div class=\"exercise-title-box\">\n            <div class=\"icon-run-wrapper\">\n              <svg class=\"icon-run\" width=\"12\" height=\"12\">\n                <use href=\"/YourEnergy/sprite.svg#icon-run\"></use>\n              </svg>\n            </div>\n            <h3 class=\"exercise-name\">${exercise.name}</h3>\n          </div>\n          <ul class=\"exercise-details\">\n            <li class=\"detail-item\">\n              Burned calories: <span class=\"detail-value\">${exercise.burnedCalories}</span>\n            </li>\n            <li class=\"detail-item\">\n              Body part: <span class=\"detail-value\">${exercise.bodyPart}</span>\n            </li>\n            <li class=\"detail-item\">\n              Target: <span class=\"detail-value\">${exercise.target}</span>\n            </li>\n          </ul>\n        </div>\n        <div class=\"exercise-right\">\n          <span class=\"workout-badge\">WORKOUT</span>\n          <div class=\"rating-wrap\">\n            <span>${exercise.rating.toFixed(1)}</span>\n            <svg width=\"14\" height=\"14\">\n              <use href=\"/YourEnergy/sprite.svg#icon-star\"></use>\n            </svg>\n          </div>\n          <button class=\"start-btn\" data-id=\"${exercise._id}\">\n            Start\n            <svg width=\"14\" height=\"14\">\n              <use href=\"/YourEnergy/sprite.svg#icon-arrow\"></use>\n            </svg>\n          </button>\n        </div>\n      </div>\n    </div>\n  `;\n}\n\n/**\n * Обробка кліку по фільтру\n */\nasync function handleFilterClick(event) {\n  const btn = event.target.closest('.filters-btn');\n  if (!btn) return;\n\n  // Якщо клікнули по вже активному фільтру - нічого не робимо\n  if (btn.classList.contains('active')) return;\n\n  // Змінюємо активний клас\n  document.querySelector('.filters-btn.active')?.classList.remove('active');\n  btn.classList.add('active');\n\n  // Hide category name and search when switching filters\n  if (elements.currentCategory) elements.currentCategory.textContent = '';\n  if (elements.categorySeparator)\n    elements.categorySeparator.classList.remove('visible');\n  if (elements.searchForm) elements.searchForm.classList.remove('visible');\n\n  // Оновлюємо стан\n  currentState.filter = btn.dataset.filter;\n  currentState.page = 1;\n\n  // Завантажуємо категорії\n  await loadCategories();\n}\n\n/**\n * Обробка кліку по пагінації\n */\nasync function handlePaginationClick(event) {\n  const btn = event.target.closest('.pagination-btn');\n  if (!btn) return;\n\n  const newPage = Number(btn.dataset.page);\n  if (newPage === currentState.page) return;\n\n  currentState.page = newPage;\n  await loadCategories();\n}\n\n/**\n * Завантаження та рендер категорій\n */\nasync function loadCategories() {\n  // Show loading\n  elements.exercisesContainer.innerHTML =\n    '<p class=\"loader-text\">Loading categories...</p>';\n\n  try {\n    const data = await api.getFilters(\n      currentState.filter,\n      currentState.page,\n      currentState.limit\n    );\n\n    if (data.results.length === 0) {\n      elements.exercisesContainer.innerHTML =\n        '<p class=\"loader-text\">Nothing found.</p>';\n      elements.pagination.innerHTML = '';\n      return;\n    }\n\n    // Render categories\n    renderCategoriesMarkup(data.results);\n\n    // Render pagination (click handling done via delegation in initFilters)\n    renderPagination(elements.pagination, data.totalPages, Number(data.page));\n  } catch (error) {\n    elements.exercisesContainer.innerHTML =\n      '<p class=\"loader-text\" style=\"color: red\">Something went wrong. Try reloading page.</p>';\n    elements.pagination.innerHTML = '';\n  }\n}\n\n/**\n * Обробка кліку по картці категорії\n */\nasync function handleCategoryClick(event) {\n  // Перевіряємо чи це клік по картці категорії\n  const card = event.target.closest('.category-card');\n  if (!card) return;\n\n  const { filter, name } = card.dataset;\n\n  // Hide pagination\n  elements.pagination.innerHTML = '';\n\n  // Load exercises for this category\n  await loadExercises(filter, name);\n}\n\n/**\n * Створення HTML розмітки для списку категорій\n */\nfunction renderCategoriesMarkup(results) {\n  const cardsMarkup = results\n    .map(\n      item => `\n    <li class=\"category-card\" \n         data-name=\"${item.name}\" \n         data-filter=\"${item.filter}\">\n      <img class=\"category-img\" src=\"${item.imgURL}\" alt=\"${item.name}\" loading=\"lazy\">\n      <div class=\"category-info\">\n        <h3 class=\"category-title\">${item.name}</h3>\n        <p class=\"category-filter\">${item.filter}</p>\n      </div>\n    </li>\n  `\n    )\n    .join('');\n\n  elements.exercisesContainer.innerHTML = `<ul class=\"categories-list\">${cardsMarkup}</ul>`;\n}\n","\nexport function showToast(message, type = 'success') {\n  const toast = document.createElement('div');\n  toast.className = `toast ${type}`;\n  toast.textContent = message;\n\n  document.body.appendChild(toast);\n\n  setTimeout(() => {\n    toast.classList.add('show');\n  }, 100);\n\n  setTimeout(() => {\n    toast.classList.remove('show');\n    setTimeout(() => {\n      document.body.removeChild(toast);\n    }, 300);\n  }, 3000);\n}\n","import { YourEnergyAPI } from './api.js';\nimport { showToast } from './toast.js';\n\nconst api = new YourEnergyAPI();\nconst form = document.getElementById('subscribe-form');\n\nexport function initFooter() {\n  if (form) {\n    form.addEventListener('submit', handleSubscribe);\n  }\n}\n\nasync function handleSubscribe(event) {\n  event.preventDefault();\n\n  const emailInput = form.elements.email;\n  const email = emailInput.value.trim();\n\n  // Standard email regex pattern matching the HTML pattern\n  const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\n\n  if (!emailPattern.test(email)) {\n    showToast('Please enter a valid email address.', 'error');\n    return;\n  }\n\n  try {\n    await api.createSubscription(email);\n    showToast(\"We're excited to have you on board!\", 'success');\n    form.reset();\n  } catch (error) {\n    // Handle specific API error codes\n    if (error.status === 409) {\n      showToast('You are already subscribed to our updates!', 'info');\n    } else if (error.status === 400) {\n      showToast('Invalid email format. Please check and try again.', 'error');\n    } else {\n      showToast('Something went wrong. Please try again later.', 'error');\n    }\n  }\n}\n","/**\n * Збереження даних у LocalStorage\n * @param {string} key\n * @param {any} value\n */\nexport const save = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    // Silently handle localStorage errors\n  }\n};\n\n/**\n * Отримання даних з LocalStorage\n * @param {string} key\n * @returns {any}\n */\nexport const load = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    // Silently handle localStorage errors\n  }\n};\n\n/**\n * Видалення даних з LocalStorage\n * @param {string} key\n */\nexport const remove = key => {\n  try {\n    localStorage.removeItem(key);\n  } catch (error) {\n    // Silently handle localStorage errors\n  }\n};\n\n// Favorites helpers - now stores only IDs\nconst FAVORITES_KEY = 'favorites_ids';\n\n/**\n * Get favorite exercise IDs from LocalStorage\n * @returns {string[]} Array of exercise IDs\n */\nexport function getFavoriteIds() {\n  return load(FAVORITES_KEY) || [];\n}\n\n/**\n * Add exercise ID to favorites\n * @param {string} id - Exercise ID\n */\nexport function addFavoriteId(id) {\n  const favoriteIds = getFavoriteIds();\n  if (!favoriteIds.includes(id)) {\n    favoriteIds.push(id);\n    save(FAVORITES_KEY, favoriteIds);\n  }\n}\n\n/**\n * Remove exercise ID from favorites\n * @param {string} id - Exercise ID\n */\nexport function removeFavoriteId(id) {\n  const favoriteIds = getFavoriteIds();\n  const filtered = favoriteIds.filter(favId => favId !== id);\n  save(FAVORITES_KEY, filtered);\n}\n\n/**\n * Check if exercise is in favorites\n * @param {string} id - Exercise ID\n * @returns {boolean}\n */\nexport function isFavorite(id) {\n  const favoriteIds = getFavoriteIds();\n  return favoriteIds.includes(id);\n}\n\n// Migration helper - convert old format to new (only IDs)\nexport function migrateOldFavorites() {\n  const oldFavorites = load('favorites');\n  if (oldFavorites && Array.isArray(oldFavorites) && oldFavorites.length > 0) {\n    // Check if old format (objects with _id)\n    if (typeof oldFavorites[0] === 'object' && oldFavorites[0]._id) {\n      const ids = oldFavorites.map(item => item._id);\n      save(FAVORITES_KEY, ids);\n      remove('favorites'); // Remove old key\n    }\n  }\n}\n","import { YourEnergyAPI } from './api.js';\nimport * as storage from './storage.js';\nimport { showToast } from './toast.js';\n\nconst api = new YourEnergyAPI();\n\nconst elements = {\n  exerciseModalBackdrop: document.querySelector('[data-modal]'),\n  exerciseModalContent: document.getElementById('exercise-modal-content'),\n  exerciseModalCloseBtn: document.querySelector('[data-modal-close]'),\n  ratingModalBackdrop: document.querySelector('[data-rating-modal]'),\n  ratingModalContent: document.getElementById('rating-modal-content'),\n  ratingModalCloseBtn: document.querySelector('[data-rating-modal-close]'),\n  ratingForm: document.getElementById('rating-form'),\n  ratingStars: document.getElementById('rating-stars'),\n  ratingValueSpan: document.querySelector('.rating-value'),\n  exercisesContainer: document.getElementById('exercises-container'),\n  favoritesContainer: document.getElementById('favorites-container'),\n};\n\nlet currentExerciseId = null;\nlet currentRating = 0;\n\nexport function initModals() {\n  // Support both exercises and favorites pages\n  if (elements.exercisesContainer) {\n    elements.exercisesContainer.addEventListener('click', handleCardClick);\n  }\n  if (elements.favoritesContainer) {\n    elements.favoritesContainer.addEventListener('click', handleCardClick);\n  }\n\n  if (elements.exerciseModalCloseBtn) {\n    elements.exerciseModalCloseBtn.addEventListener(\n      'click',\n      closeExerciseModal\n    );\n  }\n  if (elements.ratingModalCloseBtn) {\n    elements.ratingModalCloseBtn.addEventListener('click', closeRatingModal);\n  }\n  if (elements.ratingStars) {\n    elements.ratingStars.addEventListener('click', handleRatingStarsClick);\n  }\n  if (elements.ratingForm) {\n    elements.ratingForm.addEventListener('submit', handleRatingSubmit);\n  }\n\n  // Close with backdrop click (these stay attached - they check visibility internally)\n  if (elements.exerciseModalBackdrop) {\n    elements.exerciseModalBackdrop.addEventListener(\n      'click',\n      handleBackdropClick\n    );\n  }\n  if (elements.ratingModalBackdrop) {\n    elements.ratingModalBackdrop.addEventListener('click', handleBackdropClick);\n  }\n\n  // Note: Escape key listener is added/removed dynamically in open/close functions\n}\n\nfunction handleBackdropClick(event) {\n  if (event.target === elements.exerciseModalBackdrop) {\n    closeExerciseModal();\n  }\n  if (event.target === elements.ratingModalBackdrop) {\n    closeRatingModal();\n  }\n}\n\nfunction handleKeyDown(event) {\n  if (event.key === 'Escape') {\n    if (!elements.exerciseModalBackdrop.classList.contains('is-hidden')) {\n      closeExerciseModal();\n    }\n    if (!elements.ratingModalBackdrop.classList.contains('is-hidden')) {\n      closeRatingModal();\n    }\n  }\n}\n\nasync function handleCardClick(event) {\n  const startBtn = event.target.closest('.start-btn');\n  if (!startBtn) return;\n\n  const exerciseId = startBtn.dataset.id;\n  if (exerciseId) {\n    await openExerciseModal(exerciseId);\n  }\n}\n\nasync function openExerciseModal(exerciseId) {\n  currentExerciseId = exerciseId;\n  elements.exerciseModalContent.innerHTML =\n    '<p class=\"loader-text\">Loading exercise details...</p>';\n  elements.exerciseModalBackdrop.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden'; // Prevent background scroll\n\n  // Add Escape key listener when modal opens\n  document.addEventListener('keydown', handleKeyDown);\n\n  try {\n    const exerciseDetails = await api.getExerciseById(exerciseId);\n    renderExerciseDetails(exerciseDetails);\n  } catch (error) {\n    elements.exerciseModalContent.innerHTML =\n      '<p class=\"loader-text\" style=\"color: red\">Failed to load exercise details.</p>';\n  }\n}\n\nfunction closeExerciseModal() {\n  elements.exerciseModalBackdrop.classList.add('is-hidden');\n  elements.exerciseModalContent.innerHTML = ''; // Clear content\n  currentExerciseId = null;\n  document.body.style.overflow = ''; // Restore scroll\n\n  // Remove Escape key listener when modal closes (if rating modal is also closed)\n  if (elements.ratingModalBackdrop.classList.contains('is-hidden')) {\n    document.removeEventListener('keydown', handleKeyDown);\n  }\n}\n\nfunction renderStars(rating) {\n  let starsMarkup = '';\n  const fullStars = Math.floor(rating);\n  const hasHalfStar = rating % 1 !== 0;\n\n  for (let i = 0; i < 5; i++) {\n    if (i < fullStars) {\n      starsMarkup += `<svg class=\"star-icon filled\" width=\"14\" height=\"14\"><use href=\"/YourEnergy/sprite.svg#icon-star\"></use></svg>`;\n    } else if (hasHalfStar && i === fullStars) {\n      // This template doesn't have half stars, so we'll just use full for simplicity or leave empty\n      starsMarkup += `<svg class=\"star-icon\" width=\"14\" height=\"14\"><use href=\"/YourEnergy/sprite.svg#icon-star\"></use></svg>`;\n    } else {\n      starsMarkup += `<svg class=\"star-icon\" width=\"14\" height=\"14\"><use href=\"/YourEnergy/sprite.svg#icon-star\"></use></svg>`;\n    }\n  }\n  return starsMarkup;\n}\n\nfunction renderExerciseDetails(exercise) {\n  const isFav = storage.isFavorite(exercise._id);\n  const favBtnText = isFav ? 'Remove from favorites' : 'Add to favorites';\n\n  const markup = `\n    <div class=\"modal-exercise-card\">\n      <!-- Left Column: Image -->\n      <div class=\"modal-image-wrap\">\n        <img class=\"modal-exercise-img\" src=\"${exercise.gifUrl}\" alt=\"${exercise.name}\">\n      </div>\n      \n      <!-- Right Column: Content -->\n      <div class=\"modal-exercise-info\">\n        <h3 class=\"modal-exercise-name\">${exercise.name}</h3>\n        <div class=\"modal-rating-wrap\">\n          <span class=\"modal-rating-value\">${exercise.rating.toFixed(1)}</span>\n          <div class=\"modal-stars\">\n            ${renderStars(exercise.rating)}\n          </div>\n        </div>\n        \n        <!-- Stats Grid -->\n        <div class=\"modal-stats-grid\">\n          <div class=\"modal-stat-item\">\n            <span class=\"modal-stat-label\">Target</span>\n            <span class=\"modal-stat-value\">${exercise.target}</span>\n          </div>\n          <div class=\"modal-stat-item\">\n            <span class=\"modal-stat-label\">Body Part</span>\n            <span class=\"modal-stat-value\">${exercise.bodyPart}</span>\n          </div>\n          <div class=\"modal-stat-item\">\n            <span class=\"modal-stat-label\">Equipment</span>\n            <span class=\"modal-stat-value\">${exercise.equipment}</span>\n          </div>\n          <div class=\"modal-stat-item\">\n            <span class=\"modal-stat-label\">Popular</span>\n            <span class=\"modal-stat-value\">${exercise.popularity}</span>\n          </div>\n        </div>\n        \n        <!-- Burned Calories - Separate -->\n        <div class=\"modal-calories\">\n          <span class=\"modal-calories-label\">Burned calories</span>\n          <span class=\"modal-calories-value\">${exercise.burnedCalories}/${exercise.time} min</span>\n        </div>\n        \n        <!-- Description -->\n        <p class=\"modal-exercise-description\">${exercise.description}</p>\n        \n        <!-- Buttons -->\n        <div class=\"modal-buttons\">\n          <button class=\"add-to-favorites-btn\" type=\"button\" data-id=\"${exercise._id}\">\n            ${favBtnText}\n            <svg class=\"heart-icon\" width=\"18\" height=\"18\">\n              <use href=\"/YourEnergy/sprite.svg#icon-heart\"></use>\n            </svg>\n          </button>\n          <button class=\"give-rating-btn\" type=\"button\" data-id=\"${exercise._id}\">Give a rating</button>\n        </div>\n      </div>\n    </div>\n  `;\n  elements.exerciseModalContent.innerHTML = markup;\n\n  const giveRatingBtn =\n    elements.exerciseModalContent.querySelector('.give-rating-btn');\n  if (giveRatingBtn) {\n    giveRatingBtn.addEventListener('click', openRatingModal);\n  }\n\n  // Add to favorites button logic\n  const addBtn = elements.exerciseModalContent.querySelector(\n    '.add-to-favorites-btn'\n  );\n  if (addBtn) {\n    addBtn.addEventListener('click', () =>\n      handleFavoriteToggle(exercise, addBtn)\n    );\n  }\n}\n\nfunction handleFavoriteToggle(exercise, button) {\n  const isFav = storage.isFavorite(exercise._id);\n  const heartIcon = `<svg class=\"heart-icon\" width=\"18\" height=\"18\"><use href=\"/YourEnergy/sprite.svg#icon-heart\"></use></svg>`;\n\n  if (isFav) {\n    storage.removeFavoriteId(exercise._id);\n    showToast('Removed from favorites', 'success');\n    button.innerHTML = `Add to favorites ${heartIcon}`;\n  } else {\n    storage.addFavoriteId(exercise._id);\n    showToast('Added to favorites!', 'success');\n    button.innerHTML = `Remove from favorites ${heartIcon}`;\n  }\n}\n\nfunction openRatingModal() {\n  if (!currentExerciseId) return;\n\n  // Close exercise modal but keep currentExerciseId\n  const savedExerciseId = currentExerciseId;\n  elements.exerciseModalBackdrop.classList.add('is-hidden');\n  elements.exerciseModalContent.innerHTML = '';\n  currentExerciseId = savedExerciseId;\n\n  elements.ratingModalBackdrop.classList.remove('is-hidden');\n  document.body.style.overflow = 'hidden'; // Keep scroll locked\n  currentRating = 0; // Reset rating\n  updateRatingStars();\n  elements.ratingForm.reset();\n\n  // Ensure Escape listener is attached\n  document.addEventListener('keydown', handleKeyDown);\n}\n\nasync function closeRatingModal() {\n  const exerciseIdToReopen = currentExerciseId;\n  elements.ratingModalBackdrop.classList.add('is-hidden');\n\n  // Return to exercise modal if we have the ID\n  if (exerciseIdToReopen) {\n    await openExerciseModal(exerciseIdToReopen);\n  } else {\n    document.body.style.overflow = ''; // Restore scroll\n    document.removeEventListener('keydown', handleKeyDown);\n  }\n}\n\nfunction handleRatingStarsClick(event) {\n  const star = event.target.closest('.star-icon');\n  if (!star) return;\n\n  currentRating = parseInt(star.dataset.rating);\n  updateRatingStars();\n}\n\nfunction updateRatingStars() {\n  const stars = elements.ratingStars.querySelectorAll('.star-icon');\n  elements.ratingValueSpan.textContent = currentRating.toFixed(1);\n\n  stars.forEach((star, index) => {\n    if (index < currentRating) {\n      star.classList.add('filled');\n    } else {\n      star.classList.remove('filled');\n    }\n  });\n}\n\nasync function handleRatingSubmit(event) {\n  event.preventDefault();\n  const formData = new FormData(elements.ratingForm);\n  const email = formData.get('email');\n  const review = formData.get('review');\n\n  if (!currentExerciseId || currentRating === 0 || !email) {\n    showToast('Please provide a rating and your email.', 'error');\n    return;\n  }\n\n  const exerciseIdToReopen = currentExerciseId;\n\n  try {\n    await api.patchRating(currentExerciseId, {\n      rate: currentRating,\n      email,\n      review,\n    });\n    showToast('Thank you for your rating!', 'success');\n    closeRatingModal();\n    // Re-open exercise modal with updated rating\n    await openExerciseModal(exerciseIdToReopen);\n  } catch (error) {\n    if (error.status === 409) {\n      showToast('You have already rated this exercise.', 'info');\n    } else {\n      showToast(\n        'Failed to submit rating. ' + (error.message || 'Please try again.'),\n        'error'\n      );\n    }\n  }\n}\n","import { YourEnergyAPI } from './api.js';\nimport * as storage from './storage.js';\nimport { showToast } from './toast.js';\nimport { initModals } from './modal.js';\n\nconst api = new YourEnergyAPI();\n\nconst elements = {\n  favoritesContainer: document.getElementById('favorites-container'),\n  favoritesEmpty: document.getElementById('favorites-empty'),\n  quoteWrapper: document.getElementById('quote-wrapper'),\n};\n\nexport async function initFavorites() {\n  // Migrate old favorites format (full objects) to new format (only IDs)\n  storage.migrateOldFavorites();\n\n  // Render favorites from API\n  await renderFavorites();\n\n  // Add event listener for removing from favorites\n  elements.favoritesContainer.addEventListener('click', handleRemoveFavorite);\n\n  // Initialize modals for interaction with favorite exercise cards\n  initModals();\n\n  // Render quote of the day (it's also on the favorites page)\n  await initQuoteForFavoritesPage();\n}\n\nasync function initQuoteForFavoritesPage() {\n  if (!elements.quoteWrapper) return;\n\n  const quoteText = elements.quoteWrapper.querySelector('#quote-text');\n  const quoteAuthor = elements.quoteWrapper.querySelector('#quote-author');\n\n  const today = new Date().toDateString();\n  const savedQuote = storage.load('quote');\n\n  if (savedQuote && savedQuote.date === today) {\n    renderQuote({ quote: savedQuote.quote, author: savedQuote.author });\n  } else {\n    try {\n      const data = await api.getQuote();\n      if (!data || !data.quote) throw new Error('No quote data');\n      const quoteToSave = { ...data, date: today };\n      storage.save('quote', quoteToSave);\n      renderQuote({ quote: quoteToSave.quote, author: quoteToSave.author });\n    } catch (error) {\n      const fallbackQuote = {\n        quote: \"The only bad workout is the one that didn't happen.\",\n        author: 'Unknown',\n      };\n      renderQuote(fallbackQuote);\n    }\n  }\n\n  function renderQuote({ quote, author }) {\n    if (quoteText) quoteText.textContent = quote;\n    if (quoteAuthor) quoteAuthor.textContent = author;\n    elements.quoteWrapper.classList.remove('hidden');\n  }\n}\n\nasync function renderFavorites() {\n  const favoriteIds = storage.getFavoriteIds();\n\n  if (favoriteIds.length === 0) {\n    showEmptyMessage();\n    return;\n  }\n\n  // Show loading\n  elements.favoritesEmpty.classList.add('hidden');\n  elements.favoritesContainer.innerHTML =\n    '<p class=\"loader-text\">Loading your favorites...</p>';\n\n  try {\n    // Fetch all exercises by ID from API\n    const exercisePromises = favoriteIds.map(id =>\n      api.getExerciseById(id).catch(() => null)\n    );\n    const exercises = await Promise.all(exercisePromises);\n\n    // Filter out failed requests (null values)\n    const validExercises = exercises.filter(ex => ex !== null);\n\n    // If all requests failed or no valid exercises\n    if (validExercises.length === 0) {\n      showEmptyMessage();\n      return;\n    }\n\n    // Update storage with only valid IDs (cleanup)\n    const validIds = validExercises.map(ex => ex._id);\n    storage.save('favorites_ids', validIds);\n\n    // Render cards\n    renderFavoriteCards(validExercises);\n  } catch (error) {\n    elements.favoritesContainer.innerHTML =\n      '<p class=\"loader-text\" style=\"color: red\">Failed to load favorites. Please try again.</p>';\n  }\n}\n\nfunction showEmptyMessage() {\n  elements.favoritesEmpty.classList.remove('hidden');\n  elements.favoritesContainer.innerHTML = '';\n}\n\nfunction renderFavoriteCards(exercises) {\n  elements.favoritesEmpty.classList.add('hidden');\n\n  const cardsMarkup = exercises\n    .map(\n      exercise => `\n    <li class=\"exercise-card\" data-id=\"${exercise._id}\">\n      <div class=\"exercise-content\">\n        <div class=\"exercise-left\">\n          <span class=\"workout-badge\">Workout</span>\n          <div class=\"rating-wrap\">\n            <span>${exercise.rating.toFixed(1)}</span>\n            ${renderStars(exercise.rating)}\n          </div>\n          <div class=\"exercise-title-box\">\n            <h3 class=\"exercise-name\">${exercise.name}</h3>\n          </div>\n          <ul class=\"exercise-details\">\n            <li class=\"detail-item\">\n              <p class=\"detail-label\">Burned calories:</p>\n              <p class=\"detail-value\">${exercise.burnedCalories} / ${exercise.time} min</p>\n            </li>\n            <li class=\"detail-item\">\n              <p class=\"detail-label\">Body part:</p>\n              <p class=\"detail-value\">${exercise.bodyPart}</p>\n            </li>\n            <li class=\"detail-item\">\n              <p class=\"detail-label\">Target:</p>\n              <p class=\"detail-value\">${exercise.target}</p>\n            </li>\n          </ul>\n        </div>\n        <div class=\"exercise-right\">\n          <button class=\"start-btn\" type=\"button\" data-id=\"${exercise._id}\">Start\n            <svg width=\"14\" height=\"14\">\n              <use href=\"/YourEnergy/sprite.svg#icon-arrow\"></use>\n            </svg>\n          </button>\n          <button class=\"remove-from-favorites-btn\" type=\"button\" data-id=\"${exercise._id}\">\n            <svg class=\"icon-trash\" width=\"16\" height=\"16\">\n              <use href=\"/YourEnergy/sprite.svg#icon-trash\"></use>\n            </svg>\n          </button>\n        </div>\n      </div>\n    </li>\n    `\n    )\n    .join('');\n\n  elements.favoritesContainer.innerHTML = `<ul class=\"favorites-list\">${cardsMarkup}</ul>`;\n}\n\nfunction renderStars(rating) {\n  let starsMarkup = '';\n  const fullStars = Math.floor(rating);\n  const hasHalfStar = rating % 1 !== 0;\n\n  for (let i = 0; i < 5; i++) {\n    if (i < fullStars) {\n      starsMarkup += `<svg class=\"star-icon filled\" width=\"14\" height=\"14\"><use href=\"/YourEnergy/sprite.svg#icon-star\"></use></svg>`;\n    } else if (hasHalfStar && i === fullStars) {\n      starsMarkup += `<svg class=\"star-icon\" width=\"14\" height=\"14\"><use href=\"/YourEnergy/sprite.svg#icon-star\"></use></svg>`;\n    } else {\n      starsMarkup += `<svg class=\"star-icon\" width=\"14\" height=\"14\"><use href=\"/YourEnergy/sprite.svg#icon-star\"></use></svg>`;\n    }\n  }\n  return starsMarkup;\n}\n\nasync function handleRemoveFavorite(event) {\n  const removeBtn = event.target.closest('.remove-from-favorites-btn');\n  if (!removeBtn) return;\n\n  const exerciseId = removeBtn.dataset.id;\n  if (exerciseId) {\n    storage.removeFavoriteId(exerciseId);\n    showToast('Exercise removed from favorites!', 'success');\n\n    // Check if there are any favorites left\n    const remainingIds = storage.getFavoriteIds();\n    if (remainingIds.length === 0) {\n      // Show empty message immediately\n      showEmptyMessage();\n    } else {\n      // Re-render with remaining exercises\n      await renderFavorites();\n    }\n  }\n}\n","/**\n * Main entry point - Your Energy SPA\n * Імпортує всі модулі та ініціалізує їх при завантаженні DOM\n */\nimport './js/header.js';\nimport { initQuote } from './js/quote.js';\nimport { initFilters } from './js/filters.js';\nimport { initFooter } from './js/footer.js';\nimport { initModals } from './js/modal.js';\nimport { initFavorites } from './js/favorites.js';\n\n// Запуск при завантаженні DOM\ndocument.addEventListener('DOMContentLoaded', () => {\n  const path = window.location.pathname;\n  const isFavoritesPage = path.includes('favorites.html');\n\n  if (isFavoritesPage) {\n    // Favorites page only\n    initFavorites();\n  } else {\n    // Home page only\n    initQuote();\n    initFilters();\n    initModals();\n  }\n\n  // Common for all pages\n  initFooter();\n});\n"],"names":["setActiveNavLink","currentPath","navLinks","mobileNavLinks","link","_a","_b","_c","_d","menuOpenBtn","menuCloseBtn","mobileMenu","YourEnergyAPI","__privateAdd","_YourEnergyAPI_instances","_BASE_URL","__privateMethod","fetchData_fn","filter","page","limit","params","bodypart","muscles","equipment","keyword","searchParams","id","data","email","endpoint","options","url","__privateGet","response","error","api","QUOTE_STORAGE_KEY","getTodayDate","getCachedQuote","cached","date","quote","author","cacheQuote","initQuote","quoteWrapper","quoteData","quoteText","quoteAuthor","renderPagination","container","totalPages","currentPage","markup","i","exercisesContainer","pagination","searchForm","exercisesTitle","handleExercisePaginationClick","getExercisesLimit","exercisesState","FILTER_MAP","loadExercises","name","currentCategory","categorySeparator","handleSearch","fetchAndRenderExercises","renderExercisesMarkup","exercises","cardsMarkup","ex","event","btn","newPage","elements","getFiltersLimit","currentState","initFilters","handleFilterClick","handleCategoryClick","handlePaginationClick","loadCategories","renderCategoriesMarkup","card","results","item","showToast","message","type","toast","form","initFooter","handleSubscribe","save","key","value","serializedState","load","remove","FAVORITES_KEY","getFavoriteIds","addFavoriteId","favoriteIds","removeFavoriteId","filtered","favId","isFavorite","migrateOldFavorites","oldFavorites","ids","currentExerciseId","currentRating","initModals","handleCardClick","closeExerciseModal","closeRatingModal","handleRatingStarsClick","handleRatingSubmit","handleBackdropClick","handleKeyDown","startBtn","exerciseId","openExerciseModal","exerciseDetails","renderExerciseDetails","renderStars","rating","starsMarkup","fullStars","hasHalfStar","exercise","favBtnText","storage.isFavorite","giveRatingBtn","openRatingModal","addBtn","handleFavoriteToggle","button","isFav","heartIcon","storage.removeFavoriteId","storage.addFavoriteId","savedExerciseId","updateRatingStars","exerciseIdToReopen","star","stars","index","formData","review","initFavorites","storage.migrateOldFavorites","renderFavorites","handleRemoveFavorite","initQuoteForFavoritesPage","today","savedQuote","storage.load","renderQuote","quoteToSave","storage.save","storage.getFavoriteIds","showEmptyMessage","exercisePromises","validExercises","validIds","renderFavoriteCards","removeBtn"],"mappings":"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"}