{"version":3,"file":"main-R9avdFZn.js","sources":["../../src/js/header.js","../../src/js/api.js","../../src/js/quote.js","../../src/js/pagination.js","../../src/js/exercises.js","../../src/js/filters.js","../../src/js/toast.js","../../src/js/footer.js","../../src/js/storage.js","../../src/js/modal.js","../../src/js/favorites.js","../../src/main.js"],"sourcesContent":["// Set active navigation link based on current page\r\nconst setActiveNavLink = () => {\r\n  const currentPath = window.location.pathname;\r\n  const navLinks = document.querySelectorAll('.nav-link');\r\n  const mobileNavLinks = document.querySelectorAll('.mobile-nav-link');\r\n\r\n  // Remove all active classes\r\n  [...navLinks, ...mobileNavLinks].forEach(link => {\r\n    link.classList.remove('active');\r\n  });\r\n\r\n  // Set active based on current page\r\n  if (currentPath.includes('favorites')) {\r\n    navLinks[1]?.classList.add('active'); // Favorites\r\n    mobileNavLinks[1]?.classList.add('active');\r\n  } else {\r\n    navLinks[0]?.classList.add('active'); // Home\r\n    mobileNavLinks[0]?.classList.add('active');\r\n  }\r\n};\r\n\r\n// Mobile menu toggle\r\nconst menuOpenBtn = document.querySelector('[data-menu-open]');\r\nconst menuCloseBtn = document.querySelector('[data-menu-close]');\r\nconst mobileMenu = document.querySelector('[data-menu]');\r\n\r\nif (menuOpenBtn && menuCloseBtn && mobileMenu) {\r\n  menuOpenBtn.addEventListener('click', () => {\r\n    mobileMenu.classList.add('is-open');\r\n  });\r\n\r\n  menuCloseBtn.addEventListener('click', () => {\r\n    mobileMenu.classList.remove('is-open');\r\n  });\r\n}\r\n\r\n// Set active link on page load\r\nsetActiveNavLink();\r\n","/**\r\n * Клас для взаємодії з Your Energy API\r\n * Документація: https://your-energy.b.goit.study/api-docs/\r\n */\r\nexport class YourEnergyAPI {\r\n  #BASE_URL = 'https://your-energy.b.goit.study/api';\r\n\r\n  /**\r\n   * Універсальний метод для виконання запитів\r\n   * @param {string} endpoint - частина URL після base\r\n   * @param {object} options - налаштування запиту (method, headers, body)\r\n   */\r\n  async #fetchData(endpoint, options = {}) {\r\n    const url = `${this.#BASE_URL}${endpoint}`;\r\n\r\n    try {\r\n      const response = await fetch(url, options);\r\n\r\n      // Якщо статус не ОК (не 200-299), кидаємо помилку з кодом статусу\r\n      if (!response.ok) {\r\n        const error = new Error(\r\n          `API Error: ${response.status} ${response.statusText}`\r\n        );\r\n        error.status = response.status; // Зберігаємо код статусу для обробки\r\n        throw error;\r\n      }\r\n\r\n      return await response.json();\r\n    } catch (error) {\r\n      // Прокидаємо помилку далі, щоб обробити її в UI\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Отримання цитати дня\r\n   * GET /quote\r\n   */\r\n  async getQuote() {\r\n    return this.#fetchData('/quote');\r\n  }\r\n\r\n  /**\r\n   * Отримання списку фільтрів (категорій)\r\n   * GET /filters\r\n   * @param {string} filter - 'Muscles', 'Body parts', 'Equipment'\r\n   * @param {number} page\r\n   * @param {number} limit\r\n   */\r\n  async getFilters(filter = 'Muscles', page = 1, limit = 12) {\r\n    // Формуємо параметри запиту\r\n    const params = new URLSearchParams({\r\n      filter,\r\n      page,\r\n      limit,\r\n    });\r\n    return this.#fetchData(`/filters?${params}`);\r\n  }\r\n\r\n  /**\r\n   * Отримання вправ\r\n   * GET /exercises\r\n   * @param {object} params - { bodypart, muscles, equipment, keyword, page, limit }\r\n   */\r\n  async getExercises({\r\n    bodypart = '',\r\n    muscles = '',\r\n    equipment = '',\r\n    keyword = '',\r\n    page = 1,\r\n    limit = 10,\r\n  } = {}) {\r\n    const searchParams = new URLSearchParams({\r\n      page,\r\n      limit,\r\n    });\r\n\r\n    // Додаємо тільки ті параметри, які існують (не пусті)\r\n    if (bodypart) searchParams.append('bodypart', bodypart);\r\n    if (muscles) searchParams.append('muscles', muscles);\r\n    if (equipment) searchParams.append('equipment', equipment);\r\n    if (keyword) searchParams.append('keyword', keyword);\r\n\r\n    return this.#fetchData(`/exercises?${searchParams}`);\r\n  }\r\n\r\n  /**\r\n   * Отримання деталей однієї вправи\r\n   * GET /exercises/{id}\r\n   * @param {string} id\r\n   */\r\n  async getExerciseById(id) {\r\n    return this.#fetchData(`/exercises/${id}`);\r\n  }\r\n\r\n  /**\r\n   * Додавання рейтингу вправі\r\n   * PATCH /exercises/{id}/rating\r\n   * @param {string} id\r\n   * @param {object} data - { rate: number, email: string, review: string }\r\n   */\r\n  async patchRating(id, data) {\r\n    return this.#fetchData(`/exercises/${id}/rating`, {\r\n      method: 'PATCH',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify(data),\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Оформлення підписки\r\n   * POST /subscription\r\n   * @param {string} email\r\n   */\r\n  async createSubscription(email) {\r\n    return this.#fetchData('/subscription', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      body: JSON.stringify({ email }),\r\n    });\r\n  }\r\n}\r\n","/**\r\n * Модуль для завантаження та відображення Quote of the Day\r\n * З кешуванням в localStorage для зменшення запитів до API\r\n */\r\nimport { YourEnergyAPI } from './api.js';\r\n\r\nconst api = new YourEnergyAPI();\r\nconst QUOTE_STORAGE_KEY = 'yourEnergy_quote';\r\n\r\n/**\r\n * Отримати сьогоднішню дату у форматі YYYY-MM-DD\r\n */\r\nfunction getTodayDate() {\r\n  return new Date().toISOString().split('T')[0];\r\n}\r\n\r\n/**\r\n * Отримати кешовану цитату з localStorage\r\n */\r\nfunction getCachedQuote() {\r\n  try {\r\n    const cached = localStorage.getItem(QUOTE_STORAGE_KEY);\r\n    if (!cached) return null;\r\n\r\n    const { date, quote, author } = JSON.parse(cached);\r\n\r\n    // Перевіряємо чи цитата за сьогодні\r\n    if (date === getTodayDate()) {\r\n      return { quote, author };\r\n    }\r\n    return null;\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n * Зберегти цитату в localStorage\r\n */\r\nfunction cacheQuote(quote, author) {\r\n  try {\r\n    const data = {\r\n      date: getTodayDate(),\r\n      quote,\r\n      author,\r\n    };\r\n    localStorage.setItem(QUOTE_STORAGE_KEY, JSON.stringify(data));\r\n  } catch {\r\n    // Ігноруємо помилки localStorage\r\n  }\r\n}\r\n\r\n/**\r\n * Ініціалізація та завантаження цитати дня\r\n */\r\nexport async function initQuote() {\r\n  const quoteWrapper = document.getElementById('quote-wrapper');\r\n\r\n  if (!quoteWrapper) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // Спробувати отримати кешовану цитату\r\n    const cached = getCachedQuote();\r\n\r\n    let quoteData;\r\n    if (cached) {\r\n      quoteData = cached;\r\n    } else {\r\n      // Завантажити з API та закешувати\r\n      quoteData = await api.getQuote();\r\n      cacheQuote(quoteData.quote, quoteData.author);\r\n    }\r\n\r\n    // Заповнити елементи даними\r\n    const quoteText = document.getElementById('quote-text');\r\n    const quoteAuthor = document.getElementById('quote-author');\r\n\r\n    if (quoteText && quoteAuthor) {\r\n      quoteText.textContent = quoteData.quote;\r\n      quoteAuthor.textContent = quoteData.author;\r\n      quoteWrapper.classList.remove('hidden');\r\n    }\r\n  } catch (error) {\r\n    // Fallback: показати дефолтну цитату\r\n    const quoteText = document.getElementById('quote-text');\r\n    const quoteAuthor = document.getElementById('quote-author');\r\n\r\n    if (quoteText && quoteAuthor) {\r\n      quoteText.textContent =\r\n        \"The only bad workout is the one that didn't happen.\";\r\n      quoteAuthor.textContent = 'Unknown';\r\n      quoteWrapper.classList.remove('hidden');\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Render pagination buttons\r\n * @param {HTMLElement} container - Container to render buttons in\r\n * @param {number} totalPages - Total number of pages\r\n * @param {number} currentPage - Current active page\r\n *\r\n * Note: Click handling is done via event delegation in the parent module\r\n * (filters.js or exercises.js) to prevent listener accumulation.\r\n */\r\nexport function renderPagination(container, totalPages, currentPage = 1) {\r\n  // Hide pagination if only 1 page or less\r\n  if (totalPages <= 1) {\r\n    container.innerHTML = '';\r\n    return;\r\n  }\r\n\r\n  let markup = '';\r\n\r\n  for (let i = 1; i <= totalPages; i++) {\r\n    if (\r\n      i === 1 ||\r\n      i === totalPages ||\r\n      (i >= currentPage - 2 && i <= currentPage + 2)\r\n    ) {\r\n      const isActive = i === currentPage ? 'active' : '';\r\n      markup += `\r\n        <button class=\"pagination-btn ${isActive}\" type=\"button\" data-page=\"${i}\">\r\n          ${i}\r\n        </button>\r\n      `;\r\n    } else if (\r\n      (i === currentPage - 3 && currentPage > 4) ||\r\n      (i === currentPage + 3 && currentPage < totalPages - 3)\r\n    ) {\r\n      markup += `<span class=\"pagination-dots\">...</span>`;\r\n    }\r\n  }\r\n\r\n  container.innerHTML = markup;\r\n}\r\n","/**\r\n * Модуль для роботи з вправами\r\n * Завантаження та рендер вправ по категоріях\r\n */\r\nimport { YourEnergyAPI } from './api.js';\r\nimport { renderPagination } from './pagination.js';\r\n\r\nconst api = new YourEnergyAPI();\r\n\r\n// DOM елементи (можуть бути null, якщо сторінка не головна)\r\nconst exercisesContainer = document.getElementById('exercises-container');\r\nconst pagination = document.getElementById('pagination');\r\nconst searchForm = document.getElementById('search-form');\r\nconst exercisesTitle = document.querySelector('.exercises-title');\r\n\r\n// Initialize pagination click handler (delegation)\r\nif (pagination) {\r\n  pagination.addEventListener('click', handleExercisePaginationClick);\r\n}\r\n\r\n// Get adaptive limit based on screen width\r\nfunction getExercisesLimit() {\r\n  return window.innerWidth >= 768 ? 10 : 8;\r\n}\r\n\r\n// Стан модуля для завантаження вправ по категорії\r\nlet exercisesState = {\r\n  filter: '',\r\n  name: '',\r\n  keyword: '',\r\n  page: 1,\r\n  limit: getExercisesLimit(),\r\n};\r\n\r\n// Мапа фільтрів для API параметрів\r\nconst FILTER_MAP = {\r\n  Muscles: 'muscles',\r\n  'Body parts': 'bodypart',\r\n  Equipment: 'equipment',\r\n};\r\n\r\n/**\r\n * Завантаження вправ за категорією (викликається з filters.js)\r\n * @param {string} filter - Тип фільтра (Muscles, Body parts, Equipment)\r\n * @param {string} name - Назва категорії (Abs, Back, Barbell тощо)\r\n */\r\nexport async function loadExercises(filter, name) {\r\n  // Update category display (Exercises / Category)\r\n  const currentCategory = document.getElementById('current-category');\r\n  const categorySeparator = document.querySelector(\r\n    '.exercises-category-separator'\r\n  );\r\n\r\n  if (currentCategory) {\r\n    currentCategory.textContent = name;\r\n  }\r\n  if (categorySeparator) {\r\n    categorySeparator.classList.add('visible');\r\n  }\r\n\r\n  // Show search form\r\n  if (searchForm) {\r\n    searchForm.classList.remove('hidden');\r\n    searchForm.classList.add('visible');\r\n    searchForm.reset();\r\n\r\n    // Add search handler (avoid duplication)\r\n    searchForm.removeEventListener('submit', handleSearch);\r\n    searchForm.addEventListener('submit', handleSearch);\r\n  }\r\n\r\n  // Оновлюємо стан\r\n  exercisesState.filter = filter;\r\n  exercisesState.name = name;\r\n  exercisesState.keyword = '';\r\n  exercisesState.page = 1;\r\n\r\n  // Завантажуємо вправи\r\n  await fetchAndRenderExercises();\r\n}\r\n\r\n/**\r\n * Внутрішня функція для завантаження та рендеру вправ\r\n */\r\nasync function fetchAndRenderExercises() {\r\n  if (!exercisesContainer) {\r\n    return;\r\n  }\r\n\r\n  exercisesContainer.innerHTML =\r\n    '<p class=\"loader-text\">Loading exercises...</p>';\r\n  if (pagination) pagination.innerHTML = '';\r\n\r\n  try {\r\n    const paramName = FILTER_MAP[exercisesState.filter];\r\n    const params = {\r\n      [paramName]: exercisesState.name.toLowerCase(),\r\n      page: exercisesState.page,\r\n      limit: exercisesState.limit,\r\n    };\r\n\r\n    if (exercisesState.keyword) {\r\n      params.keyword = exercisesState.keyword;\r\n    }\r\n\r\n    const data = await api.getExercises(params);\r\n\r\n    if (!data.results || data.results.length === 0) {\r\n      exercisesContainer.innerHTML =\r\n        '<p class=\"loader-text\">No exercises found for this category.</p>';\r\n      return;\r\n    }\r\n\r\n    renderExercisesMarkup(data.results);\r\n\r\n    if (pagination) {\r\n      renderPagination(pagination, data.totalPages, Number(data.page));\r\n    }\r\n  } catch (error) {\r\n    exercisesContainer.innerHTML =\r\n      '<p class=\"loader-text\" style=\"color: red\">Failed to load exercises. Please try again.</p>';\r\n  }\r\n}\r\n\r\n/**\r\n * Рендер карток вправ\r\n */\r\nfunction renderExercisesMarkup(exercises) {\r\n  const cardsMarkup = exercises\r\n    .map(\r\n      ex => `\r\n    <li class=\"exercise-card\" data-id=\"${ex._id}\">\r\n      <!-- Header: Badge + Rating | Start button -->\r\n      <div class=\"exercise-header\">\r\n        <div class=\"exercise-header-left\">\r\n          <span class=\"workout-badge\">WORKOUT</span>\r\n          <div class=\"rating-wrap\">\r\n            <span class=\"rating-value\">${ex.rating.toFixed(1)}</span>\r\n            <svg class=\"rating-icon\" width=\"14\" height=\"14\">\r\n              <use href=\"/YourEnergy/sprite.svg#icon-star\"></use>\r\n            </svg>\r\n          </div>\r\n        </div>\r\n        <button class=\"start-btn\" type=\"button\" data-id=\"${ex._id}\">\r\n          Start\r\n          <svg width=\"16\" height=\"16\">\r\n            <use href=\"/YourEnergy/sprite.svg#icon-arrow\"></use>\r\n          </svg>\r\n        </button>\r\n      </div>\r\n      \r\n      <!-- Title with icon -->\r\n      <div class=\"exercise-title-box\">\r\n        <div class=\"icon-run-wrapper\">\r\n          <svg class=\"icon-run\" width=\"14\" height=\"14\">\r\n            <use href=\"/YourEnergy/sprite.svg#icon-run\"></use>\r\n          </svg>\r\n        </div>\r\n        <h3 class=\"exercise-name\">${ex.name}</h3>\r\n      </div>\r\n      \r\n      <!-- Details row -->\r\n      <ul class=\"exercise-details\">\r\n        <li class=\"detail-item\"><span class=\"detail-label\">Burned calories:</span> <span class=\"detail-value\">${ex.burnedCalories} / ${ex.time} min</span></li>\r\n        <li class=\"detail-item\"><span class=\"detail-label\">Body part:</span> <span class=\"detail-value\">${ex.bodyPart}</span></li>\r\n        <li class=\"detail-item\"><span class=\"detail-label\">Target:</span> <span class=\"detail-value\">${ex.target}</span></li>\r\n      </ul>\r\n    </li>\r\n  `\r\n    )\r\n    .join('');\r\n\r\n  exercisesContainer.innerHTML = `<ul class=\"exercises-list\">${cardsMarkup}</ul>`;\r\n}\r\n\r\n/**\r\n * Обробка пагінації вправ\r\n */\r\nfunction handleExercisePaginationClick(event) {\r\n  const btn = event.target.closest('.pagination-btn');\r\n  if (!btn) return;\r\n\r\n  const newPage = Number(btn.dataset.page);\r\n  if (newPage === exercisesState.page) return;\r\n\r\n  exercisesState.page = newPage;\r\n  fetchAndRenderExercises();\r\n\r\n  // Скрол до заголовка\r\n  if (exercisesTitle) {\r\n    exercisesTitle.scrollIntoView({ behavior: 'smooth' });\r\n  }\r\n}\r\n\r\n/**\r\n * Обробка пошуку\r\n */\r\nasync function handleSearch(event) {\r\n  event.preventDefault();\r\n\r\n  const form = event.currentTarget;\r\n  const keyword = form.elements.keyword.value.trim();\r\n\r\n  exercisesState.keyword = keyword;\r\n  exercisesState.page = 1;\r\n\r\n  await fetchAndRenderExercises();\r\n}\r\n","import { YourEnergyAPI } from './api.js';\r\nimport { loadExercises } from './exercises.js';\r\nimport { renderPagination } from './pagination.js';\r\n\r\nconst api = new YourEnergyAPI();\r\n\r\n// Посилання на DOM елементи\r\nconst elements = {\r\n  filtersList: document.getElementById('filters-list'),\r\n  exercisesContainer: document.getElementById('exercises-container'),\r\n  pagination: document.getElementById('pagination'),\r\n  currentCategory: document.getElementById('current-category'),\r\n  categorySeparator: document.querySelector('.exercises-category-separator'),\r\n  searchForm: document.getElementById('search-form'),\r\n};\r\n\r\n// Get adaptive limit based on screen width\r\nfunction getFiltersLimit() {\r\n  return window.innerWidth >= 768 ? 12 : 9;\r\n}\r\n\r\n// Зберігаємо поточний стан\r\nlet currentState = {\r\n  filter: 'Muscles',\r\n  page: 1,\r\n  limit: getFiltersLimit(),\r\n};\r\n\r\n/**\r\n * Головна функція ініціалізації фільтрів\r\n */\r\nexport async function initFilters() {\r\n  if (!elements.filtersList) return;\r\n\r\n  // 1. Додаємо слухача подій на кнопки фільтрів (делегування)\r\n  elements.filtersList.addEventListener('click', handleFilterClick);\r\n\r\n  // 2. Додаємо слухача на контейнер вправ (делегування)\r\n  elements.exercisesContainer.addEventListener('click', handleCategoryClick);\r\n\r\n  // 3. Додаємо слухача на пагінацію\r\n  if (elements.pagination) {\r\n    elements.pagination.addEventListener('click', handlePaginationClick);\r\n  }\r\n\r\n  // 4. Load categories by default on page load\r\n  await loadCategories();\r\n}\r\n\r\n/**\r\n * Load default exercises to show on page load\r\n */\r\nasync function loadDefaultExercises() {\r\n  if (!elements.exercisesContainer) {\r\n    return;\r\n  }\r\n\r\n  // Show loading\r\n  elements.exercisesContainer.innerHTML =\r\n    '<p class=\"loader-text\">Loading...</p>';\r\n\r\n  try {\r\n    const data = await api.getExercises({ limit: 10 });\r\n\r\n    // Clear loading\r\n    elements.exercisesContainer.innerHTML = '';\r\n\r\n    // Check if results exist\r\n    if (!data.results || data.results.length === 0) {\r\n      elements.exercisesContainer.innerHTML =\r\n        '<p class=\"loader-text\">No exercises found</p>';\r\n      return;\r\n    }\r\n\r\n    // Create cards\r\n    data.results.forEach(exercise => {\r\n      const card = createExerciseCard(exercise);\r\n      elements.exercisesContainer.insertAdjacentHTML('beforeend', card);\r\n    });\r\n  } catch (error) {\r\n    elements.exercisesContainer.innerHTML =\r\n      '<p class=\"loader-text\">Failed to load exercises</p>';\r\n  }\r\n}\r\n\r\nfunction createExerciseCard(exercise) {\r\n  return `\r\n    <div class=\"exercise-card\" data-id=\"${exercise._id}\">\r\n      <div class=\"exercise-content\">\r\n        <div class=\"exercise-left\">\r\n          <div class=\"exercise-title-box\">\r\n            <div class=\"icon-run-wrapper\">\r\n              <svg class=\"icon-run\" width=\"12\" height=\"12\">\r\n                <use href=\"/YourEnergy/sprite.svg#icon-run\"></use>\r\n              </svg>\r\n            </div>\r\n            <h3 class=\"exercise-name\">${exercise.name}</h3>\r\n          </div>\r\n          <ul class=\"exercise-details\">\r\n            <li class=\"detail-item\">\r\n              Burned calories: <span class=\"detail-value\">${exercise.burnedCalories}</span>\r\n            </li>\r\n            <li class=\"detail-item\">\r\n              Body part: <span class=\"detail-value\">${exercise.bodyPart}</span>\r\n            </li>\r\n            <li class=\"detail-item\">\r\n              Target: <span class=\"detail-value\">${exercise.target}</span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"exercise-right\">\r\n          <span class=\"workout-badge\">WORKOUT</span>\r\n          <div class=\"rating-wrap\">\r\n            <span>${exercise.rating.toFixed(1)}</span>\r\n            <svg width=\"14\" height=\"14\">\r\n              <use href=\"/YourEnergy/sprite.svg#icon-star\"></use>\r\n            </svg>\r\n          </div>\r\n          <button class=\"start-btn\" data-id=\"${exercise._id}\">\r\n            Start\r\n            <svg width=\"14\" height=\"14\">\r\n              <use href=\"/YourEnergy/sprite.svg#icon-arrow\"></use>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `;\r\n}\r\n\r\n/**\r\n * Обробка кліку по фільтру\r\n */\r\nasync function handleFilterClick(event) {\r\n  const btn = event.target.closest('.filters-btn');\r\n  if (!btn) return;\r\n\r\n  // Якщо клікнули по вже активному фільтру - нічого не робимо\r\n  if (btn.classList.contains('active')) return;\r\n\r\n  // Змінюємо активний клас\r\n  document.querySelector('.filters-btn.active')?.classList.remove('active');\r\n  btn.classList.add('active');\r\n\r\n  // Hide category name and search when switching filters\r\n  if (elements.currentCategory) elements.currentCategory.textContent = '';\r\n  if (elements.categorySeparator)\r\n    elements.categorySeparator.classList.remove('visible');\r\n  if (elements.searchForm) elements.searchForm.classList.remove('visible');\r\n\r\n  // Оновлюємо стан\r\n  currentState.filter = btn.dataset.filter;\r\n  currentState.page = 1;\r\n\r\n  // Завантажуємо категорії\r\n  await loadCategories();\r\n}\r\n\r\n/**\r\n * Обробка кліку по пагінації\r\n */\r\nasync function handlePaginationClick(event) {\r\n  const btn = event.target.closest('.pagination-btn');\r\n  if (!btn) return;\r\n\r\n  const newPage = Number(btn.dataset.page);\r\n  if (newPage === currentState.page) return;\r\n\r\n  currentState.page = newPage;\r\n  await loadCategories();\r\n}\r\n\r\n/**\r\n * Завантаження та рендер категорій\r\n */\r\nasync function loadCategories() {\r\n  // Show loading\r\n  elements.exercisesContainer.innerHTML =\r\n    '<p class=\"loader-text\">Loading categories...</p>';\r\n\r\n  try {\r\n    const data = await api.getFilters(\r\n      currentState.filter,\r\n      currentState.page,\r\n      currentState.limit\r\n    );\r\n\r\n    if (data.results.length === 0) {\r\n      elements.exercisesContainer.innerHTML =\r\n        '<p class=\"loader-text\">Nothing found.</p>';\r\n      elements.pagination.innerHTML = '';\r\n      return;\r\n    }\r\n\r\n    // Render categories\r\n    renderCategoriesMarkup(data.results);\r\n\r\n    // Render pagination (click handling done via delegation in initFilters)\r\n    renderPagination(elements.pagination, data.totalPages, Number(data.page));\r\n  } catch (error) {\r\n    elements.exercisesContainer.innerHTML =\r\n      '<p class=\"loader-text\" style=\"color: red\">Something went wrong. Try reloading page.</p>';\r\n    elements.pagination.innerHTML = '';\r\n  }\r\n}\r\n\r\n/**\r\n * Обробка кліку по картці категорії\r\n */\r\nasync function handleCategoryClick(event) {\r\n  // Перевіряємо чи це клік по картці категорії\r\n  const card = event.target.closest('.category-card');\r\n  if (!card) return;\r\n\r\n  const { filter, name } = card.dataset;\r\n\r\n  // Hide pagination\r\n  elements.pagination.innerHTML = '';\r\n\r\n  // Load exercises for this category\r\n  await loadExercises(filter, name);\r\n}\r\n\r\n/**\r\n * Створення HTML розмітки для списку категорій\r\n */\r\nfunction renderCategoriesMarkup(results) {\r\n  const cardsMarkup = results\r\n    .map(\r\n      item => `\r\n    <li class=\"category-card\" \r\n         data-name=\"${item.name}\" \r\n         data-filter=\"${item.filter}\">\r\n      <img class=\"category-img\" src=\"${item.imgURL}\" alt=\"${item.name}\" loading=\"lazy\">\r\n      <div class=\"category-info\">\r\n        <h3 class=\"category-title\">${item.name}</h3>\r\n        <p class=\"category-filter\">${item.filter}</p>\r\n      </div>\r\n    </li>\r\n  `\r\n    )\r\n    .join('');\r\n\r\n  elements.exercisesContainer.innerHTML = `<ul class=\"categories-list\">${cardsMarkup}</ul>`;\r\n}\r\n","\r\nexport function showToast(message, type = 'success') {\r\n  const toast = document.createElement('div');\r\n  toast.className = `toast ${type}`;\r\n  toast.textContent = message;\r\n\r\n  document.body.appendChild(toast);\r\n\r\n  setTimeout(() => {\r\n    toast.classList.add('show');\r\n  }, 100);\r\n\r\n  setTimeout(() => {\r\n    toast.classList.remove('show');\r\n    setTimeout(() => {\r\n      document.body.removeChild(toast);\r\n    }, 300);\r\n  }, 3000);\r\n}\r\n","import { YourEnergyAPI } from './api.js';\r\nimport { showToast } from './toast.js';\r\n\r\nconst api = new YourEnergyAPI();\r\nconst form = document.getElementById('subscribe-form');\r\n\r\nexport function initFooter() {\r\n  if (form) {\r\n    form.addEventListener('submit', handleSubscribe);\r\n  }\r\n}\r\n\r\nasync function handleSubscribe(event) {\r\n  event.preventDefault();\r\n\r\n  const emailInput = form.elements.email;\r\n  const email = emailInput.value.trim();\r\n\r\n  // Standard email regex pattern matching the HTML pattern\r\n  const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$/;\r\n\r\n  if (!emailPattern.test(email)) {\r\n    showToast('Please enter a valid email address.', 'error');\r\n    return;\r\n  }\r\n\r\n  try {\r\n    await api.createSubscription(email);\r\n    showToast(\"We're excited to have you on board!\", 'success');\r\n    form.reset();\r\n  } catch (error) {\r\n    // Handle specific API error codes\r\n    if (error.status === 409) {\r\n      showToast('You are already subscribed to our updates!', 'info');\r\n    } else if (error.status === 400) {\r\n      showToast('Invalid email format. Please check and try again.', 'error');\r\n    } else {\r\n      showToast('Something went wrong. Please try again later.', 'error');\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Збереження даних у LocalStorage\r\n * @param {string} key\r\n * @param {any} value\r\n */\r\nexport const save = (key, value) => {\r\n  try {\r\n    const serializedState = JSON.stringify(value);\r\n    localStorage.setItem(key, serializedState);\r\n  } catch (error) {\r\n    // Silently handle localStorage errors\r\n  }\r\n};\r\n\r\n/**\r\n * Отримання даних з LocalStorage\r\n * @param {string} key\r\n * @returns {any}\r\n */\r\nexport const load = key => {\r\n  try {\r\n    const serializedState = localStorage.getItem(key);\r\n    return serializedState === null ? undefined : JSON.parse(serializedState);\r\n  } catch (error) {\r\n    // Silently handle localStorage errors\r\n  }\r\n};\r\n\r\n/**\r\n * Видалення даних з LocalStorage\r\n * @param {string} key\r\n */\r\nexport const remove = key => {\r\n  try {\r\n    localStorage.removeItem(key);\r\n  } catch (error) {\r\n    // Silently handle localStorage errors\r\n  }\r\n};\r\n\r\n// Favorites helpers - now stores only IDs\r\nconst FAVORITES_KEY = 'favorites_ids';\r\n\r\n/**\r\n * Get favorite exercise IDs from LocalStorage\r\n * @returns {string[]} Array of exercise IDs\r\n */\r\nexport function getFavoriteIds() {\r\n  return load(FAVORITES_KEY) || [];\r\n}\r\n\r\n/**\r\n * Add exercise ID to favorites\r\n * @param {string} id - Exercise ID\r\n */\r\nexport function addFavoriteId(id) {\r\n  const favoriteIds = getFavoriteIds();\r\n  if (!favoriteIds.includes(id)) {\r\n    favoriteIds.push(id);\r\n    save(FAVORITES_KEY, favoriteIds);\r\n  }\r\n}\r\n\r\n/**\r\n * Remove exercise ID from favorites\r\n * @param {string} id - Exercise ID\r\n */\r\nexport function removeFavoriteId(id) {\r\n  const favoriteIds = getFavoriteIds();\r\n  const filtered = favoriteIds.filter(favId => favId !== id);\r\n  save(FAVORITES_KEY, filtered);\r\n}\r\n\r\n/**\r\n * Check if exercise is in favorites\r\n * @param {string} id - Exercise ID\r\n * @returns {boolean}\r\n */\r\nexport function isFavorite(id) {\r\n  const favoriteIds = getFavoriteIds();\r\n  return favoriteIds.includes(id);\r\n}\r\n\r\n// Migration helper - convert old format to new (only IDs)\r\nexport function migrateOldFavorites() {\r\n  const oldFavorites = load('favorites');\r\n  if (oldFavorites && Array.isArray(oldFavorites) && oldFavorites.length > 0) {\r\n    // Check if old format (objects with _id)\r\n    if (typeof oldFavorites[0] === 'object' && oldFavorites[0]._id) {\r\n      const ids = oldFavorites.map(item => item._id);\r\n      save(FAVORITES_KEY, ids);\r\n      remove('favorites'); // Remove old key\r\n    }\r\n  }\r\n}\r\n","import { YourEnergyAPI } from './api.js';\r\nimport * as storage from './storage.js';\r\nimport { showToast } from './toast.js';\r\n\r\nconst api = new YourEnergyAPI();\r\n\r\nconst elements = {\r\n  exerciseModalBackdrop: document.querySelector('[data-modal]'),\r\n  exerciseModalContent: document.getElementById('exercise-modal-content'),\r\n  exerciseModalCloseBtn: document.querySelector('[data-modal-close]'),\r\n  ratingModalBackdrop: document.querySelector('[data-rating-modal]'),\r\n  ratingModalContent: document.getElementById('rating-modal-content'),\r\n  ratingModalCloseBtn: document.querySelector('[data-rating-modal-close]'),\r\n  ratingForm: document.getElementById('rating-form'),\r\n  ratingStars: document.getElementById('rating-stars'),\r\n  ratingValueSpan: document.querySelector('.rating-value'),\r\n  exercisesContainer: document.getElementById('exercises-container'),\r\n  favoritesContainer: document.getElementById('favorites-container'),\r\n};\r\n\r\nlet currentExerciseId = null;\r\nlet currentRating = 0;\r\n\r\nexport function initModals() {\r\n  // Support both exercises and favorites pages\r\n  if (elements.exercisesContainer) {\r\n    elements.exercisesContainer.addEventListener('click', handleCardClick);\r\n  }\r\n  if (elements.favoritesContainer) {\r\n    elements.favoritesContainer.addEventListener('click', handleCardClick);\r\n  }\r\n\r\n  if (elements.exerciseModalCloseBtn) {\r\n    elements.exerciseModalCloseBtn.addEventListener(\r\n      'click',\r\n      closeExerciseModal\r\n    );\r\n  }\r\n  if (elements.ratingModalCloseBtn) {\r\n    elements.ratingModalCloseBtn.addEventListener('click', closeRatingModal);\r\n  }\r\n  if (elements.ratingStars) {\r\n    elements.ratingStars.addEventListener('click', handleRatingStarsClick);\r\n  }\r\n  if (elements.ratingForm) {\r\n    elements.ratingForm.addEventListener('submit', handleRatingSubmit);\r\n  }\r\n\r\n  // Close with backdrop click (these stay attached - they check visibility internally)\r\n  if (elements.exerciseModalBackdrop) {\r\n    elements.exerciseModalBackdrop.addEventListener(\r\n      'click',\r\n      handleBackdropClick\r\n    );\r\n  }\r\n  if (elements.ratingModalBackdrop) {\r\n    elements.ratingModalBackdrop.addEventListener('click', handleBackdropClick);\r\n  }\r\n\r\n  // Note: Escape key listener is added/removed dynamically in open/close functions\r\n}\r\n\r\nfunction handleBackdropClick(event) {\r\n  if (event.target === elements.exerciseModalBackdrop) {\r\n    closeExerciseModal();\r\n  }\r\n  if (event.target === elements.ratingModalBackdrop) {\r\n    closeRatingModal();\r\n  }\r\n}\r\n\r\nfunction handleKeyDown(event) {\r\n  if (event.key === 'Escape') {\r\n    if (!elements.exerciseModalBackdrop.classList.contains('is-hidden')) {\r\n      closeExerciseModal();\r\n    }\r\n    if (!elements.ratingModalBackdrop.classList.contains('is-hidden')) {\r\n      closeRatingModal();\r\n    }\r\n  }\r\n}\r\n\r\nasync function handleCardClick(event) {\r\n  const startBtn = event.target.closest('.start-btn');\r\n  if (!startBtn) return;\r\n\r\n  const exerciseId = startBtn.dataset.id;\r\n  if (exerciseId) {\r\n    await openExerciseModal(exerciseId);\r\n  }\r\n}\r\n\r\nasync function openExerciseModal(exerciseId) {\r\n  currentExerciseId = exerciseId;\r\n  elements.exerciseModalContent.innerHTML =\r\n    '<p class=\"loader-text\">Loading exercise details...</p>';\r\n  elements.exerciseModalBackdrop.classList.remove('is-hidden');\r\n  document.body.style.overflow = 'hidden'; // Prevent background scroll\r\n\r\n  // Add Escape key listener when modal opens\r\n  document.addEventListener('keydown', handleKeyDown);\r\n\r\n  try {\r\n    const exerciseDetails = await api.getExerciseById(exerciseId);\r\n    renderExerciseDetails(exerciseDetails);\r\n  } catch (error) {\r\n    elements.exerciseModalContent.innerHTML =\r\n      '<p class=\"loader-text\" style=\"color: red\">Failed to load exercise details.</p>';\r\n  }\r\n}\r\n\r\nfunction closeExerciseModal() {\r\n  elements.exerciseModalBackdrop.classList.add('is-hidden');\r\n  elements.exerciseModalContent.innerHTML = ''; // Clear content\r\n  currentExerciseId = null;\r\n  document.body.style.overflow = ''; // Restore scroll\r\n\r\n  // Remove Escape key listener when modal closes (if rating modal is also closed)\r\n  if (elements.ratingModalBackdrop.classList.contains('is-hidden')) {\r\n    document.removeEventListener('keydown', handleKeyDown);\r\n  }\r\n}\r\n\r\nfunction renderStars(rating) {\r\n  let starsMarkup = '';\r\n  const fullStars = Math.floor(rating);\r\n  const hasHalfStar = rating % 1 !== 0;\r\n\r\n  for (let i = 0; i < 5; i++) {\r\n    if (i < fullStars) {\r\n      starsMarkup += `<svg class=\"star-icon filled\" width=\"14\" height=\"14\"><use href=\"/YourEnergy/sprite.svg#icon-star\"></use></svg>`;\r\n    } else if (hasHalfStar && i === fullStars) {\r\n      // This template doesn't have half stars, so we'll just use full for simplicity or leave empty\r\n      starsMarkup += `<svg class=\"star-icon\" width=\"14\" height=\"14\"><use href=\"/YourEnergy/sprite.svg#icon-star\"></use></svg>`;\r\n    } else {\r\n      starsMarkup += `<svg class=\"star-icon\" width=\"14\" height=\"14\"><use href=\"/YourEnergy/sprite.svg#icon-star\"></use></svg>`;\r\n    }\r\n  }\r\n  return starsMarkup;\r\n}\r\n\r\nfunction renderExerciseDetails(exercise) {\r\n  const isFav = storage.isFavorite(exercise._id);\r\n  const favBtnText = isFav ? 'Remove from favorites' : 'Add to favorites';\r\n\r\n  const markup = `\r\n    <div class=\"modal-exercise-card\">\r\n      <!-- Left Column: Image -->\r\n      <div class=\"modal-image-wrap\">\r\n        <img class=\"modal-exercise-img\" src=\"${exercise.gifUrl}\" alt=\"${exercise.name}\">\r\n      </div>\r\n      \r\n      <!-- Right Column: Content -->\r\n      <div class=\"modal-exercise-info\">\r\n        <h3 class=\"modal-exercise-name\">${exercise.name}</h3>\r\n        <div class=\"modal-rating-wrap\">\r\n          <span class=\"modal-rating-value\">${exercise.rating.toFixed(1)}</span>\r\n          <div class=\"modal-stars\">\r\n            ${renderStars(exercise.rating)}\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Stats Grid -->\r\n        <div class=\"modal-stats-grid\">\r\n          <div class=\"modal-stat-item\">\r\n            <span class=\"modal-stat-label\">Target</span>\r\n            <span class=\"modal-stat-value\">${exercise.target}</span>\r\n          </div>\r\n          <div class=\"modal-stat-item\">\r\n            <span class=\"modal-stat-label\">Body Part</span>\r\n            <span class=\"modal-stat-value\">${exercise.bodyPart}</span>\r\n          </div>\r\n          <div class=\"modal-stat-item\">\r\n            <span class=\"modal-stat-label\">Equipment</span>\r\n            <span class=\"modal-stat-value\">${exercise.equipment}</span>\r\n          </div>\r\n          <div class=\"modal-stat-item\">\r\n            <span class=\"modal-stat-label\">Popular</span>\r\n            <span class=\"modal-stat-value\">${exercise.popularity}</span>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Burned Calories - Separate -->\r\n        <div class=\"modal-calories\">\r\n          <span class=\"modal-calories-label\">Burned calories</span>\r\n          <span class=\"modal-calories-value\">${exercise.burnedCalories}/${exercise.time} min</span>\r\n        </div>\r\n        \r\n        <!-- Description -->\r\n        <p class=\"modal-exercise-description\">${exercise.description}</p>\r\n        \r\n        <!-- Buttons -->\r\n        <div class=\"modal-buttons\">\r\n          <button class=\"add-to-favorites-btn\" type=\"button\" data-id=\"${exercise._id}\">\r\n            ${favBtnText}\r\n            <svg class=\"heart-icon\" width=\"18\" height=\"18\">\r\n              <use href=\"/YourEnergy/sprite.svg#icon-heart\"></use>\r\n            </svg>\r\n          </button>\r\n          <button class=\"give-rating-btn\" type=\"button\" data-id=\"${exercise._id}\">Give a rating</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  `;\r\n  elements.exerciseModalContent.innerHTML = markup;\r\n\r\n  const giveRatingBtn =\r\n    elements.exerciseModalContent.querySelector('.give-rating-btn');\r\n  if (giveRatingBtn) {\r\n    giveRatingBtn.addEventListener('click', openRatingModal);\r\n  }\r\n\r\n  // Add to favorites button logic\r\n  const addBtn = elements.exerciseModalContent.querySelector(\r\n    '.add-to-favorites-btn'\r\n  );\r\n  if (addBtn) {\r\n    addBtn.addEventListener('click', () =>\r\n      handleFavoriteToggle(exercise, addBtn)\r\n    );\r\n  }\r\n}\r\n\r\nfunction handleFavoriteToggle(exercise, button) {\r\n  const isFav = storage.isFavorite(exercise._id);\r\n  const heartIcon = `<svg class=\"heart-icon\" width=\"18\" height=\"18\"><use href=\"/YourEnergy/sprite.svg#icon-heart\"></use></svg>`;\r\n\r\n  if (isFav) {\r\n    storage.removeFavoriteId(exercise._id);\r\n    showToast('Removed from favorites', 'success');\r\n    button.innerHTML = `Add to favorites ${heartIcon}`;\r\n  } else {\r\n    storage.addFavoriteId(exercise._id);\r\n    showToast('Added to favorites!', 'success');\r\n    button.innerHTML = `Remove from favorites ${heartIcon}`;\r\n  }\r\n}\r\n\r\nfunction openRatingModal() {\r\n  if (!currentExerciseId) return;\r\n\r\n  // Close exercise modal but keep currentExerciseId\r\n  const savedExerciseId = currentExerciseId;\r\n  elements.exerciseModalBackdrop.classList.add('is-hidden');\r\n  elements.exerciseModalContent.innerHTML = '';\r\n  currentExerciseId = savedExerciseId;\r\n\r\n  elements.ratingModalBackdrop.classList.remove('is-hidden');\r\n  document.body.style.overflow = 'hidden'; // Keep scroll locked\r\n  currentRating = 0; // Reset rating\r\n  updateRatingStars();\r\n  elements.ratingForm.reset();\r\n\r\n  // Ensure Escape listener is attached\r\n  document.addEventListener('keydown', handleKeyDown);\r\n}\r\n\r\nasync function closeRatingModal() {\r\n  const exerciseIdToReopen = currentExerciseId;\r\n  elements.ratingModalBackdrop.classList.add('is-hidden');\r\n\r\n  // Return to exercise modal if we have the ID\r\n  if (exerciseIdToReopen) {\r\n    await openExerciseModal(exerciseIdToReopen);\r\n  } else {\r\n    document.body.style.overflow = ''; // Restore scroll\r\n    document.removeEventListener('keydown', handleKeyDown);\r\n  }\r\n}\r\n\r\nfunction handleRatingStarsClick(event) {\r\n  const star = event.target.closest('.star-icon');\r\n  if (!star) return;\r\n\r\n  currentRating = parseInt(star.dataset.rating);\r\n  updateRatingStars();\r\n}\r\n\r\nfunction updateRatingStars() {\r\n  const stars = elements.ratingStars.querySelectorAll('.star-icon');\r\n  elements.ratingValueSpan.textContent = currentRating.toFixed(1);\r\n\r\n  stars.forEach((star, index) => {\r\n    if (index < currentRating) {\r\n      star.classList.add('filled');\r\n    } else {\r\n      star.classList.remove('filled');\r\n    }\r\n  });\r\n}\r\n\r\nasync function handleRatingSubmit(event) {\r\n  event.preventDefault();\r\n  const formData = new FormData(elements.ratingForm);\r\n  const email = formData.get('email');\r\n  const review = formData.get('review');\r\n\r\n  if (!currentExerciseId || currentRating === 0 || !email) {\r\n    showToast('Please provide a rating and your email.', 'error');\r\n    return;\r\n  }\r\n\r\n  const exerciseIdToReopen = currentExerciseId;\r\n\r\n  try {\r\n    await api.patchRating(currentExerciseId, {\r\n      rate: currentRating,\r\n      email,\r\n      review,\r\n    });\r\n    showToast('Thank you for your rating!', 'success');\r\n    closeRatingModal();\r\n    // Re-open exercise modal with updated rating\r\n    await openExerciseModal(exerciseIdToReopen);\r\n  } catch (error) {\r\n    if (error.status === 409) {\r\n      showToast('You have already rated this exercise.', 'info');\r\n    } else {\r\n      showToast(\r\n        'Failed to submit rating. ' + (error.message || 'Please try again.'),\r\n        'error'\r\n      );\r\n    }\r\n  }\r\n}\r\n","import { YourEnergyAPI } from './api.js';\r\nimport * as storage from './storage.js';\r\nimport { showToast } from './toast.js';\r\nimport { initModals } from './modal.js';\r\n\r\nconst api = new YourEnergyAPI();\r\n\r\nconst elements = {\r\n  favoritesContainer: document.getElementById('favorites-container'),\r\n  favoritesEmpty: document.getElementById('favorites-empty'),\r\n  quoteWrapper: document.getElementById('quote-wrapper'),\r\n};\r\n\r\nexport async function initFavorites() {\r\n  // Migrate old favorites format (full objects) to new format (only IDs)\r\n  storage.migrateOldFavorites();\r\n\r\n  // Render favorites from API\r\n  await renderFavorites();\r\n\r\n  // Add event listener for removing from favorites\r\n  elements.favoritesContainer.addEventListener('click', handleRemoveFavorite);\r\n\r\n  // Initialize modals for interaction with favorite exercise cards\r\n  initModals();\r\n\r\n  // Render quote of the day (it's also on the favorites page)\r\n  await initQuoteForFavoritesPage();\r\n}\r\n\r\nasync function initQuoteForFavoritesPage() {\r\n  if (!elements.quoteWrapper) return;\r\n\r\n  const quoteText = elements.quoteWrapper.querySelector('#quote-text');\r\n  const quoteAuthor = elements.quoteWrapper.querySelector('#quote-author');\r\n\r\n  const today = new Date().toDateString();\r\n  const savedQuote = storage.load('quote');\r\n\r\n  if (savedQuote && savedQuote.date === today) {\r\n    renderQuote({ quote: savedQuote.quote, author: savedQuote.author });\r\n  } else {\r\n    try {\r\n      const data = await api.getQuote();\r\n      if (!data || !data.quote) throw new Error('No quote data');\r\n      const quoteToSave = { ...data, date: today };\r\n      storage.save('quote', quoteToSave);\r\n      renderQuote({ quote: quoteToSave.quote, author: quoteToSave.author });\r\n    } catch (error) {\r\n      const fallbackQuote = {\r\n        quote: \"The only bad workout is the one that didn't happen.\",\r\n        author: 'Unknown',\r\n      };\r\n      renderQuote(fallbackQuote);\r\n    }\r\n  }\r\n\r\n  function renderQuote({ quote, author }) {\r\n    if (quoteText) quoteText.textContent = quote;\r\n    if (quoteAuthor) quoteAuthor.textContent = author;\r\n    elements.quoteWrapper.classList.remove('hidden');\r\n  }\r\n}\r\n\r\nasync function renderFavorites() {\r\n  const favoriteIds = storage.getFavoriteIds();\r\n\r\n  if (favoriteIds.length === 0) {\r\n    showEmptyMessage();\r\n    return;\r\n  }\r\n\r\n  // Show loading\r\n  elements.favoritesEmpty.classList.add('hidden');\r\n  elements.favoritesContainer.innerHTML =\r\n    '<p class=\"loader-text\">Loading your favorites...</p>';\r\n\r\n  try {\r\n    // Fetch all exercises by ID from API\r\n    const exercisePromises = favoriteIds.map(id =>\r\n      api.getExerciseById(id).catch(() => null)\r\n    );\r\n    const exercises = await Promise.all(exercisePromises);\r\n\r\n    // Filter out failed requests (null values)\r\n    const validExercises = exercises.filter(ex => ex !== null);\r\n\r\n    // If all requests failed or no valid exercises\r\n    if (validExercises.length === 0) {\r\n      showEmptyMessage();\r\n      return;\r\n    }\r\n\r\n    // Update storage with only valid IDs (cleanup)\r\n    const validIds = validExercises.map(ex => ex._id);\r\n    storage.save('favorites_ids', validIds);\r\n\r\n    // Render cards\r\n    renderFavoriteCards(validExercises);\r\n  } catch (error) {\r\n    elements.favoritesContainer.innerHTML =\r\n      '<p class=\"loader-text\" style=\"color: red\">Failed to load favorites. Please try again.</p>';\r\n  }\r\n}\r\n\r\nfunction showEmptyMessage() {\r\n  elements.favoritesEmpty.classList.remove('hidden');\r\n  elements.favoritesContainer.innerHTML = '';\r\n}\r\n\r\nfunction renderFavoriteCards(exercises) {\r\n  elements.favoritesEmpty.classList.add('hidden');\r\n\r\n  const cardsMarkup = exercises\r\n    .map(\r\n      exercise => `\r\n    <li class=\"exercise-card\" data-id=\"${exercise._id}\">\r\n      <div class=\"exercise-content\">\r\n        <div class=\"exercise-left\">\r\n          <span class=\"workout-badge\">Workout</span>\r\n          <div class=\"rating-wrap\">\r\n            <span>${exercise.rating.toFixed(1)}</span>\r\n            ${renderStars(exercise.rating)}\r\n          </div>\r\n          <div class=\"exercise-title-box\">\r\n            <h3 class=\"exercise-name\">${exercise.name}</h3>\r\n          </div>\r\n          <ul class=\"exercise-details\">\r\n            <li class=\"detail-item\">\r\n              <p class=\"detail-label\">Burned calories:</p>\r\n              <p class=\"detail-value\">${exercise.burnedCalories} / ${exercise.time} min</p>\r\n            </li>\r\n            <li class=\"detail-item\">\r\n              <p class=\"detail-label\">Body part:</p>\r\n              <p class=\"detail-value\">${exercise.bodyPart}</p>\r\n            </li>\r\n            <li class=\"detail-item\">\r\n              <p class=\"detail-label\">Target:</p>\r\n              <p class=\"detail-value\">${exercise.target}</p>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div class=\"exercise-right\">\r\n          <button class=\"start-btn\" type=\"button\" data-id=\"${exercise._id}\">Start\r\n            <svg width=\"14\" height=\"14\">\r\n              <use href=\"/YourEnergy/sprite.svg#icon-arrow\"></use>\r\n            </svg>\r\n          </button>\r\n          <button class=\"remove-from-favorites-btn\" type=\"button\" data-id=\"${exercise._id}\">\r\n            <svg class=\"icon-trash\" width=\"16\" height=\"16\">\r\n              <use href=\"/YourEnergy/sprite.svg#icon-trash\"></use>\r\n            </svg>\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </li>\r\n    `\r\n    )\r\n    .join('');\r\n\r\n  elements.favoritesContainer.innerHTML = `<ul class=\"favorites-list\">${cardsMarkup}</ul>`;\r\n}\r\n\r\nfunction renderStars(rating) {\r\n  let starsMarkup = '';\r\n  const fullStars = Math.floor(rating);\r\n  const hasHalfStar = rating % 1 !== 0;\r\n\r\n  for (let i = 0; i < 5; i++) {\r\n    if (i < fullStars) {\r\n      starsMarkup += `<svg class=\"star-icon filled\" width=\"14\" height=\"14\"><use href=\"/YourEnergy/sprite.svg#icon-star\"></use></svg>`;\r\n    } else if (hasHalfStar && i === fullStars) {\r\n      starsMarkup += `<svg class=\"star-icon\" width=\"14\" height=\"14\"><use href=\"/YourEnergy/sprite.svg#icon-star\"></use></svg>`;\r\n    } else {\r\n      starsMarkup += `<svg class=\"star-icon\" width=\"14\" height=\"14\"><use href=\"/YourEnergy/sprite.svg#icon-star\"></use></svg>`;\r\n    }\r\n  }\r\n  return starsMarkup;\r\n}\r\n\r\nasync function handleRemoveFavorite(event) {\r\n  const removeBtn = event.target.closest('.remove-from-favorites-btn');\r\n  if (!removeBtn) return;\r\n\r\n  const exerciseId = removeBtn.dataset.id;\r\n  if (exerciseId) {\r\n    storage.removeFavoriteId(exerciseId);\r\n    showToast('Exercise removed from favorites!', 'success');\r\n\r\n    // Check if there are any favorites left\r\n    const remainingIds = storage.getFavoriteIds();\r\n    if (remainingIds.length === 0) {\r\n      // Show empty message immediately\r\n      showEmptyMessage();\r\n    } else {\r\n      // Re-render with remaining exercises\r\n      await renderFavorites();\r\n    }\r\n  }\r\n}\r\n","/**\r\n * Main entry point - Your Energy SPA\r\n * Імпортує всі модулі та ініціалізує їх при завантаженні DOM\r\n */\r\nimport './js/header.js';\r\nimport { initQuote } from './js/quote.js';\r\nimport { initFilters } from './js/filters.js';\r\nimport { initFooter } from './js/footer.js';\r\nimport { initModals } from './js/modal.js';\r\nimport { initFavorites } from './js/favorites.js';\r\n\r\n// Запуск при завантаженні DOM\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  const path = window.location.pathname;\r\n  const isFavoritesPage = path.includes('favorites.html');\r\n\r\n  if (isFavoritesPage) {\r\n    // Favorites page only\r\n    initFavorites();\r\n  } else {\r\n    // Home page only\r\n    initQuote();\r\n    initFilters();\r\n    initModals();\r\n  }\r\n\r\n  // Common for all pages\r\n  initFooter();\r\n});\r\n"],"names":["setActiveNavLink","currentPath","navLinks","mobileNavLinks","link","_a","_b","_c","_d","menuOpenBtn","menuCloseBtn","mobileMenu","YourEnergyAPI","__privateAdd","_YourEnergyAPI_instances","_BASE_URL","__privateMethod","fetchData_fn","filter","page","limit","params","bodypart","muscles","equipment","keyword","searchParams","id","data","email","endpoint","options","url","__privateGet","response","error","api","QUOTE_STORAGE_KEY","getTodayDate","getCachedQuote","cached","date","quote","author","cacheQuote","initQuote","quoteWrapper","quoteData","quoteText","quoteAuthor","renderPagination","container","totalPages","currentPage","markup","i","exercisesContainer","pagination","searchForm","exercisesTitle","handleExercisePaginationClick","getExercisesLimit","exercisesState","FILTER_MAP","loadExercises","name","currentCategory","categorySeparator","handleSearch","fetchAndRenderExercises","renderExercisesMarkup","exercises","cardsMarkup","ex","event","btn","newPage","elements","getFiltersLimit","currentState","initFilters","handleFilterClick","handleCategoryClick","handlePaginationClick","loadCategories","renderCategoriesMarkup","card","results","item","showToast","message","type","toast","form","initFooter","handleSubscribe","save","key","value","serializedState","load","remove","FAVORITES_KEY","getFavoriteIds","addFavoriteId","favoriteIds","removeFavoriteId","filtered","favId","isFavorite","migrateOldFavorites","oldFavorites","ids","currentExerciseId","currentRating","initModals","handleCardClick","closeExerciseModal","closeRatingModal","handleRatingStarsClick","handleRatingSubmit","handleBackdropClick","handleKeyDown","startBtn","exerciseId","openExerciseModal","exerciseDetails","renderExerciseDetails","renderStars","rating","starsMarkup","fullStars","hasHalfStar","exercise","favBtnText","storage.isFavorite","giveRatingBtn","openRatingModal","addBtn","handleFavoriteToggle","button","isFav","heartIcon","storage.removeFavoriteId","storage.addFavoriteId","savedExerciseId","updateRatingStars","exerciseIdToReopen","star","stars","index","formData","review","initFavorites","storage.migrateOldFavorites","renderFavorites","handleRemoveFavorite","initQuoteForFavoritesPage","today","savedQuote","storage.load","renderQuote","quoteToSave","storage.save","storage.getFavoriteIds","showEmptyMessage","exercisePromises","validExercises","validIds","renderFavoriteCards","removeBtn"],"mappings":"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"}